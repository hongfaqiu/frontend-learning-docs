import { Callout } from 'nextra/components'

# 06. å¼€å‘ç¯å¢ƒå’Œå·¥å…·é“¾é…ç½®

## ğŸ“‹ ç›®å½•

- [ç°ä»£å¼€å‘ç¯å¢ƒæ­å»º](#ç°ä»£å¼€å‘ç¯å¢ƒæ­å»º)
- [ç‰ˆæœ¬æ§åˆ¶å’ŒGitå·¥ä½œæµ](#ç‰ˆæœ¬æ§åˆ¶å’Œgitå·¥ä½œæµ)
- [è°ƒè¯•å·¥å…·å’ŒæŠ€å·§](#è°ƒè¯•å·¥å…·å’ŒæŠ€å·§)
- [åŒ…ç®¡ç†å™¨æ·±å…¥](#åŒ…ç®¡ç†å™¨æ·±å…¥)
- [å¼€å‘æ•ˆç‡å·¥å…·](#å¼€å‘æ•ˆç‡å·¥å…·)
- [å›¢é˜Ÿåä½œè§„èŒƒ](#å›¢é˜Ÿåä½œè§„èŒƒ)

## ğŸ’» ç°ä»£å¼€å‘ç¯å¢ƒæ­å»º

<Callout type="info">
ä¸€ä¸ªé«˜æ•ˆçš„å¼€å‘ç¯å¢ƒèƒ½å¤Ÿæ˜¾è‘—æå‡å¼€å‘æ•ˆç‡ï¼Œå‡å°‘é‡å¤æ€§å·¥ä½œï¼Œè®©å¼€å‘è€…ä¸“æ³¨äºæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€‚
</Callout>

### Node.jsç¯å¢ƒç®¡ç†

```bash
# ä½¿ç”¨nvmç®¡ç†Node.jsç‰ˆæœ¬
# å®‰è£…nvm (macOS/Linux)
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

# Windowsç”¨æˆ·ä½¿ç”¨nvm-windows
# ä¸‹è½½ï¼šhttps://github.com/coreybutler/nvm-windows

# å®‰è£…å’Œä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„Node.js
nvm install 18.17.0    # å®‰è£…Node.js 18.17.0
nvm install 20.5.0     # å®‰è£…Node.js 20.5.0
nvm use 18.17.0        # åˆ‡æ¢åˆ°18.17.0
nvm alias default 18.17.0  # è®¾ç½®é»˜è®¤ç‰ˆæœ¬
nvm list               # æŸ¥çœ‹å·²å®‰è£…ç‰ˆæœ¬

# é¡¹ç›®çº§Node.jsç‰ˆæœ¬ç®¡ç†
echo "18.17.0" > .nvmrc  # åˆ›å»º.nvmrcæ–‡ä»¶
nvm use                  # è‡ªåŠ¨ä½¿ç”¨.nvmrcä¸­æŒ‡å®šçš„ç‰ˆæœ¬
```

### VS Codeå¼€å‘ç¯å¢ƒé…ç½®

```json
// .vscode/settings.json - é¡¹ç›®çº§é…ç½®
{
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true,
    "source.organizeImports": true
  },
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.tabSize": 2,
  "editor.insertSpaces": true,
  "editor.rulers": [80, 120],
  "files.eol": "\n",
  "files.trimTrailingWhitespace": true,
  "files.insertFinalNewline": true,
  "typescript.preferences.importModuleSpecifier": "relative",
  "typescript.suggest.autoImports": true,
  "emmet.includeLanguages": {
    "javascript": "javascriptreact",
    "typescript": "typescriptreact"
  },
  "search.exclude": {
    "**/node_modules": true,
    "**/dist": true,
    "**/build": true,
    "**/.git": true
  },
  "files.watcherExclude": {
    "**/node_modules/**": true,
    "**/dist/**": true,
    "**/build/**": true
  }
}

// .vscode/extensions.json - æ¨èæ‰©å±•
{
  "recommendations": [
    "esbenp.prettier-vscode",
    "dbaeumer.vscode-eslint",
    "bradlc.vscode-tailwindcss",
    "ms-vscode.vscode-typescript-next",
    "formulahendry.auto-rename-tag",
    "christian-kohler.path-intellisense",
    "ms-vscode.vscode-json",
    "redhat.vscode-yaml",
    "ms-vscode.vscode-css-peek",
    "zignd.html-css-class-completion"
  ]
}

// .vscode/launch.json - è°ƒè¯•é…ç½®
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Launch Chrome",
      "request": "launch",
      "type": "chrome",
      "url": "http://localhost:3000",
      "webRoot": "${workspaceFolder}/src",
      "sourceMapPathOverrides": {
        "webpack:///src/*": "${webRoot}/*"
      }
    },
    {
      "name": "Attach to Chrome",
      "port": 9222,
      "request": "attach",
      "type": "chrome",
      "webRoot": "${workspaceFolder}/src"
    },
    {
      "name": "Debug Node.js",
      "type": "node",
      "request": "launch",
      "program": "${workspaceFolder}/server.js",
      "env": {
        "NODE_ENV": "development"
      }
    }
  ]
}

// .vscode/tasks.json - ä»»åŠ¡é…ç½®
{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "npm: start",
      "type": "npm",
      "script": "start",
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      }
    },
    {
      "label": "npm: build",
      "type": "npm",
      "script": "build",
      "group": "build"
    },
    {
      "label": "npm: test",
      "type": "npm",
      "script": "test",
      "group": "test"
    }
  ]
}
```

### ç»ˆç«¯å’ŒShellé…ç½®

```bash
# Zshé…ç½® (.zshrc)
# å®‰è£…Oh My Zsh
sh -c "$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"

# é…ç½®ä¸»é¢˜å’Œæ’ä»¶
ZSH_THEME="powerlevel10k/powerlevel10k"

plugins=(
  git
  node
  npm
  yarn
  vscode
  zsh-autosuggestions
  zsh-syntax-highlighting
  z
)

# è‡ªå®šä¹‰åˆ«å
alias ll="ls -la"
alias la="ls -A"
alias l="ls -CF"
alias ..="cd .."
alias ...="cd ../.."
alias ....="cd ../../.."

# Gitåˆ«å
alias gs="git status"
alias ga="git add"
alias gc="git commit"
alias gp="git push"
alias gl="git pull"
alias gco="git checkout"
alias gb="git branch"
alias gm="git merge"

# å¼€å‘ç›¸å…³åˆ«å
alias ni="npm install"
alias ns="npm start"
alias nb="npm run build"
alias nt="npm test"
alias nrd="npm run dev"

alias yi="yarn install"
alias ys="yarn start"
alias yb="yarn build"
alias yt="yarn test"
alias yd="yarn dev"

# é¡¹ç›®å¿«é€Ÿå¯¼èˆª
alias projects="cd ~/Projects"
alias work="cd ~/Work"

# å¸¸ç”¨å‡½æ•°
mkcd() {
  mkdir -p "$1" && cd "$1"
}

# å¿«é€Ÿåˆ›å»ºReactç»„ä»¶
create-component() {
  local name=$1
  local dir="src/components/$name"
  
  mkdir -p "$dir"
  
  cat > "$dir/index.tsx" << EOF
import React from 'react';
import './$name.css';

interface ${name}Props {
  // å®šä¹‰propsç±»å‹
}

const $name: React.FC<${name}Props> = () => {
  return (
    <div className="$name">
      <h1>$name Component</h1>
    </div>
  );
};

export default $name;
EOF

  cat > "$dir/$name.css" << EOF
.$name {
  /* ç»„ä»¶æ ·å¼ */
}
EOF

  echo "Component $name created in $dir"
}
```

## ğŸ”§ ç‰ˆæœ¬æ§åˆ¶å’ŒGitå·¥ä½œæµ

### Gité…ç½®å’Œæœ€ä½³å®è·µ

<Callout type="warning">
è‰¯å¥½çš„Gitå·¥ä½œæµæ˜¯å›¢é˜Ÿåä½œçš„åŸºç¡€ï¼Œèƒ½å¤Ÿé¿å…ä»£ç å†²çªï¼Œä¿è¯ä»£ç è´¨é‡ã€‚
</Callout>

```bash
# Gitå…¨å±€é…ç½®
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"
git config --global init.defaultBranch main
git config --global core.autocrlf input  # macOS/Linux
git config --global core.autocrlf true   # Windows

# é…ç½®ç¼–è¾‘å™¨
git config --global core.editor "code --wait"

# é…ç½®åˆ«å
git config --global alias.co checkout
git config --global alias.br branch
git config --global alias.ci commit
git config --global alias.st status
git config --global alias.unstage 'reset HEAD --'
git config --global alias.last 'log -1 HEAD'
git config --global alias.visual '!gitk'

# ç¾åŒ–æ—¥å¿—è¾“å‡º
git config --global alias.lg "log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit"

# é…ç½®å·®å¼‚å·¥å…·
git config --global merge.tool vscode
git config --global mergetool.vscode.cmd 'code --wait $MERGED'
git config --global diff.tool vscode
git config --global difftool.vscode.cmd 'code --wait --diff $LOCAL $REMOTE'
```

### Gitå·¥ä½œæµæ¨¡å¼

```bash
# Git Flowå·¥ä½œæµ
# åˆå§‹åŒ–Git Flow
git flow init

# åŠŸèƒ½å¼€å‘
git flow feature start new-feature
# å¼€å‘å®Œæˆå
git flow feature finish new-feature

# å‘å¸ƒå‡†å¤‡
git flow release start 1.0.0
# å‘å¸ƒå®Œæˆ
git flow release finish 1.0.0

# çƒ­ä¿®å¤
git flow hotfix start critical-bug
git flow hotfix finish critical-bug

# GitHub Flowå·¥ä½œæµï¼ˆæ›´ç®€å•ï¼‰
# 1. ä»mainåˆ†æ”¯åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout main
git pull origin main
git checkout -b feature/user-authentication

# 2. å¼€å‘å’Œæäº¤
git add .
git commit -m "feat: add user authentication"

# 3. æ¨é€åˆ†æ”¯
git push origin feature/user-authentication

# 4. åˆ›å»ºPull Request
# 5. ä»£ç å®¡æŸ¥å’Œåˆå¹¶
# 6. åˆ é™¤åŠŸèƒ½åˆ†æ”¯
git checkout main
git pull origin main
git branch -d feature/user-authentication
```

### æäº¤è§„èŒƒå’Œè‡ªåŠ¨åŒ–

```bash
# Conventional Commitsè§„èŒƒ
# æ ¼å¼ï¼š<type>[optional scope]: <description>

# ç±»å‹è¯´æ˜ï¼š
# feat: æ–°åŠŸèƒ½
# fix: ä¿®å¤bug
# docs: æ–‡æ¡£æ›´æ–°
# style: ä»£ç æ ¼å¼åŒ–
# refactor: é‡æ„
# test: æµ‹è¯•ç›¸å…³
# chore: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

# ç¤ºä¾‹ï¼š
git commit -m "feat(auth): add user login functionality"
git commit -m "fix(api): resolve data fetching issue"
git commit -m "docs(readme): update installation instructions"
```

```json
// package.json - æäº¤è§„èŒƒå·¥å…·é…ç½®
{
  "scripts": {
    "commit": "git-cz",
    "prepare": "husky install"
  },
  "devDependencies": {
    "@commitlint/cli": "^17.0.0",
    "@commitlint/config-conventional": "^17.0.0",
    "commitizen": "^4.2.4",
    "cz-conventional-changelog": "^3.3.0",
    "husky": "^8.0.0",
    "lint-staged": "^13.0.0"
  },
  "config": {
    "commitizen": {
      "path": "./node_modules/cz-conventional-changelog"
    }
  },
  "commitlint": {
    "extends": ["@commitlint/config-conventional"]
  },
  "lint-staged": {
    "*.{js,jsx,ts,tsx}": [
      "eslint --fix",
      "prettier --write"
    ],
    "*.{json,css,md}": [
      "prettier --write"
    ]
  }
}
```

```bash
#!/bin/sh
# .husky/commit-msg
. "$(dirname "$0")/_/husky.sh"

npx --no-install commitlint --edit "$1"
```

```bash
#!/bin/sh
# .husky/pre-commit
. "$(dirname "$0")/_/husky.sh"

npx lint-staged
npm run type-check
```

## ğŸ› è°ƒè¯•å·¥å…·å’ŒæŠ€å·§

### æµè§ˆå™¨å¼€å‘è€…å·¥å…·

```javascript
// Consoleè°ƒè¯•æŠ€å·§
// 1. æ¡ä»¶æ–­ç‚¹
function processData(data) {
  // åœ¨å¼€å‘è€…å·¥å…·ä¸­è®¾ç½®æ¡ä»¶æ–­ç‚¹ï¼šdata.length > 100
  return data.map(item => item.value);
}

// 2. æ€§èƒ½åˆ†æ
console.time('data-processing');
const result = processLargeDataSet();
console.timeEnd('data-processing');

// 3. å†…å­˜ä½¿ç”¨ç›‘æ§
console.memory; // æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ

// 4. å‡½æ•°è°ƒç”¨æ ˆ
console.trace('Function call trace');

// 5. åˆ†ç»„æ—¥å¿—
console.group('User Data');
console.log('Name:', user.name);
console.log('Email:', user.email);
console.groupEnd();

// 6. è¡¨æ ¼æ˜¾ç¤ºæ•°æ®
const users = [
  { name: 'Alice', age: 25, city: 'New York' },
  { name: 'Bob', age: 30, city: 'London' }
];
console.table(users);

// 7. æ ·å¼åŒ–è¾“å‡º
console.log('%c Success! ', 'background: green; color: white; padding: 2px 5px; border-radius: 2px');
console.log('%c Error! ', 'background: red; color: white; padding: 2px 5px; border-radius: 2px');

// 8. æ–­è¨€è°ƒè¯•
console.assert(user.age >= 18, 'User must be at least 18 years old');

// 9. è®¡æ•°å™¨
function trackClicks() {
  console.count('Button clicked');
}

// 10. æ¸…ç©ºæ§åˆ¶å°
console.clear();
```

### Reactå¼€å‘è€…å·¥å…·

```javascript
// React DevToolsä½¿ç”¨æŠ€å·§

// 1. ç»„ä»¶æ€§èƒ½åˆ†æ
import { Profiler } from 'react';

function onRenderCallback(id, phase, actualDuration, baseDuration, startTime, commitTime) {
  console.log('Component render info:', {
    id,
    phase,
    actualDuration,
    baseDuration,
    startTime,
    commitTime
  });
}

function App() {
  return (
    <Profiler id="App" onRender={onRenderCallback}>
      <Header />
      <Main />
      <Footer />
    </Profiler>
  );
}

// 2. å¼€å‘æ¨¡å¼ä¸‹çš„è°ƒè¯•ä¿¡æ¯
if (process.env.NODE_ENV === 'development') {
  // æ·»åŠ å…¨å±€è°ƒè¯•å‡½æ•°
  window.debugComponent = (component) => {
    console.log('Component props:', component.props);
    console.log('Component state:', component.state);
  };
  
  // React DevToolsé›†æˆ
  if (typeof window.__REACT_DEVTOOLS_GLOBAL_HOOK__ === 'object') {
    window.__REACT_DEVTOOLS_GLOBAL_HOOK__.onCommitFiberRoot = (id, root) => {
      console.log('React tree updated:', root);
    };
  }
}

// 3. è‡ªå®šä¹‰Hookè°ƒè¯•
import { useDebugValue, useEffect, useState } from 'react';

function useCustomHook(initialValue) {
  const [value, setValue] = useState(initialValue);
  
  // åœ¨React DevToolsä¸­æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯
  useDebugValue(value > 0 ? 'Positive' : 'Zero or Negative');
  
  useEffect(() => {
    console.log('Custom hook value changed:', value);
  }, [value]);
  
  return [value, setValue];
}
```

### ç½‘ç»œè°ƒè¯•

```javascript
// ç½‘ç»œè¯·æ±‚è°ƒè¯•
class DebugFetch {
  static async request(url, options = {}) {
    const startTime = performance.now();
    
    console.group(`ğŸŒ Network Request: ${options.method || 'GET'} ${url}`);
    console.log('Request options:', options);
    
    try {
      const response = await fetch(url, options);
      const endTime = performance.now();
      const duration = endTime - startTime;
      
      console.log(`âœ… Response received in ${duration.toFixed(2)}ms`);
      console.log('Status:', response.status, response.statusText);
      console.log('Headers:', Object.fromEntries(response.headers.entries()));
      
      const clonedResponse = response.clone();
      const data = await clonedResponse.json().catch(() => clonedResponse.text());
      console.log('Response data:', data);
      
      console.groupEnd();
      
      return response;
    } catch (error) {
      const endTime = performance.now();
      const duration = endTime - startTime;
      
      console.error(`âŒ Request failed after ${duration.toFixed(2)}ms:`, error);
      console.groupEnd();
      
      throw error;
    }
  }
}

// ä½¿ç”¨ç¤ºä¾‹
DebugFetch.request('/api/users', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({ name: 'John' })
});
```

## ğŸ“¦ åŒ…ç®¡ç†å™¨æ·±å…¥

### npm vs yarn vs pnpmå¯¹æ¯”

| ç‰¹æ€§ | npm | yarn | pnpm |
|------|-----|------|------|
| **å®‰è£…é€Ÿåº¦** | ä¸­ç­‰ | å¿« | æœ€å¿« |
| **ç£ç›˜ç©ºé—´** | å¤§ | å¤§ | å°ï¼ˆç¡¬é“¾æ¥ï¼‰ |
| **ç¦»çº¿å®‰è£…** | æ”¯æŒ | æ”¯æŒ | æ”¯æŒ |
| **å·¥ä½œç©ºé—´** | æ”¯æŒ | æ”¯æŒ | æ”¯æŒ |
| **å®‰å…¨æ€§** | ä¸­ç­‰ | é«˜ | é«˜ |
| **å…¼å®¹æ€§** | æœ€å¥½ | å¥½ | å¥½ |

```bash
# pnpmä½¿ç”¨ç¤ºä¾‹ï¼ˆæ¨èï¼‰
# å®‰è£…pnpm
npm install -g pnpm

# é¡¹ç›®åˆå§‹åŒ–
pnpm init

# å®‰è£…ä¾èµ–
pnpm install
pnpm add react react-dom
pnpm add -D typescript @types/react

# å·¥ä½œç©ºé—´é…ç½®
# pnpm-workspace.yaml
packages:
  - 'packages/*'
  - 'apps/*'

# åœ¨å·¥ä½œç©ºé—´ä¸­å®‰è£…ä¾èµ–
pnpm add lodash --filter @myorg/utils
pnpm add react --filter @myorg/web-app

# è¿è¡Œè„šæœ¬
pnpm run build
pnpm run --filter @myorg/web-app dev
```

### ä¾èµ–ç®¡ç†æœ€ä½³å®è·µ

```json
// package.jsonä¼˜åŒ–é…ç½®
{
  "name": "my-app",
  "version": "1.0.0",
  "engines": {
    "node": ">=18.0.0",
    "npm": ">=8.0.0"
  },
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview",
    "test": "vitest",
    "test:ui": "vitest --ui",
    "test:coverage": "vitest --coverage",
    "lint": "eslint src --ext ts,tsx --report-unused-disable-directives --max-warnings 0",
    "lint:fix": "eslint src --ext ts,tsx --fix",
    "type-check": "tsc --noEmit",
    "format": "prettier --write src/**/*.{ts,tsx,json,css,md}",
    "prepare": "husky install",
    "clean": "rimraf dist node_modules/.cache",
    "analyze": "npm run build && npx vite-bundle-analyzer"
  },
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0"
  },
  "devDependencies": {
    "@types/react": "^18.2.0",
    "@types/react-dom": "^18.2.0",
    "@typescript-eslint/eslint-plugin": "^6.0.0",
    "@typescript-eslint/parser": "^6.0.0",
    "@vitejs/plugin-react": "^4.0.0",
    "eslint": "^8.45.0",
    "eslint-plugin-react-hooks": "^4.6.0",
    "eslint-plugin-react-refresh": "^0.4.3",
    "husky": "^8.0.0",
    "lint-staged": "^13.0.0",
    "prettier": "^3.0.0",
    "typescript": "^5.0.2",
    "vite": "^4.4.5",
    "vitest": "^0.34.0"
  },
  "peerDependencies": {
    "react": ">=16.8.0",
    "react-dom": ">=16.8.0"
  },
  "browserslist": {
    "production": [
      ">0.2%",
      "not dead",
      "not op_mini all"
    ],
    "development": [
      "last 1 chrome version",
      "last 1 firefox version",
      "last 1 safari version"
    ]
  }
}
```

---

<Callout type="success">
è‰¯å¥½çš„å¼€å‘ç¯å¢ƒé…ç½®æ˜¯é«˜æ•ˆå¼€å‘çš„åŸºç¡€ï¼ŒæŠ•å…¥æ—¶é—´é…ç½®å·¥å…·é“¾èƒ½å¤Ÿåœ¨é•¿æœŸå¼€å‘ä¸­è·å¾—å·¨å¤§çš„æ•ˆç‡æå‡ã€‚
</Callout>
