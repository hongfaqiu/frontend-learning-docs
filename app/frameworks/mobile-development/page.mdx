import { Callout } from 'nextra/components'

# 14. ç§»åŠ¨ç«¯å¼€å‘

## ğŸ“‹ ç›®å½•

- [ç§»åŠ¨ç«¯å¼€å‘æŠ€æœ¯æ ˆ](#ç§»åŠ¨ç«¯å¼€å‘æŠ€æœ¯æ ˆ)
- [React Nativeæ·±å…¥å¼€å‘](#react-nativeæ·±å…¥å¼€å‘)
- [Flutterè·¨å¹³å°å¼€å‘](#flutterè·¨å¹³å°å¼€å‘)
- [åŸç”Ÿæ¨¡å—å’Œæ¡¥æ¥](#åŸç”Ÿæ¨¡å—å’Œæ¡¥æ¥)
- [æ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#æ€§èƒ½ä¼˜åŒ–ç­–ç•¥)
- [å‘å¸ƒå’Œåˆ†å‘](#å‘å¸ƒå’Œåˆ†å‘)

## ç§»åŠ¨ç«¯å¼€å‘æŠ€æœ¯æ ˆ

<Callout type="info">
ç§»åŠ¨ç«¯å¼€å‘æŠ€æœ¯æ—¥æ–°æœˆå¼‚ï¼Œé€‰æ‹©åˆé€‚çš„æŠ€æœ¯æ ˆèƒ½å¤Ÿå¤§å¤§æå‡å¼€å‘æ•ˆç‡å’Œåº”ç”¨æ€§èƒ½ã€‚
</Callout>

### ç§»åŠ¨ç«¯æŠ€æœ¯æ–¹æ¡ˆå¯¹æ¯”

#### ä¸»æµç§»åŠ¨ç«¯å¼€å‘æŠ€æœ¯å¯¹æ¯”

| æŠ€æœ¯æ–¹æ¡ˆ | è¯­è¨€/æŠ€æœ¯æ ˆ | æ¸²æŸ“æ–¹å¼ | æ€§èƒ½ | å¼€å‘æ•ˆç‡ | å­¦ä¹ æˆæœ¬ | é€‚ç”¨åœºæ™¯ |
|----------|-------------|----------|------|----------|----------|----------|
| **iOSåŸç”Ÿ** | Swift/Objective-C | åŸç”Ÿ | â­â­â­â­â­ | â­â­ | â­â­â­â­ | é«˜æ€§èƒ½iOSåº”ç”¨ |
| **AndroidåŸç”Ÿ** | Kotlin/Java | åŸç”Ÿ | â­â­â­â­â­ | â­â­ | â­â­â­â­ | é«˜æ€§èƒ½Androidåº”ç”¨ |
| **React Native** | React + JS/TS | åŸç”Ÿç»„ä»¶ | â­â­â­â­ | â­â­â­â­ | â­â­â­ | å¿«é€Ÿè·¨å¹³å°å¼€å‘ |
| **Flutter** | Dart | è‡ªç»˜å¼•æ“ | â­â­â­â­â­ | â­â­â­â­ | â­â­â­â­ | å¤æ‚UIã€é«˜æ€§èƒ½ |
| **Ionic** | WebæŠ€æœ¯ | WebView | â­â­ | â­â­â­â­â­ | â­â­ | ç®€å•åº”ç”¨ã€å¿«é€ŸåŸå‹ |

#### æŠ€æœ¯é€‰æ‹©æŒ‡å—

| é¡¹ç›®ç‰¹å¾ | æ¨èæŠ€æœ¯ | ç†ç”± |
|----------|----------|------|
| **é«˜æ€§èƒ½è¦æ±‚** | åŸç”Ÿå¼€å‘ | æœ€ä½³æ€§èƒ½å’Œå¹³å°é›†æˆ |
| **Reactå›¢é˜Ÿ** | React Native | æŠ€èƒ½å¤ç”¨ï¼Œå¿«é€Ÿå¼€å‘ |
| **å¤æ‚UI** | Flutter | ä¼˜ç§€çš„UIæ€§èƒ½å’Œä¸€è‡´æ€§ |
| **é¢„ç®—æœ‰é™** | Ionic | ä½æˆæœ¬ï¼Œå¿«é€Ÿä¸Šçº¿ |
| **å¿«é€ŸåŸå‹** | React Native/Ionic | å¼€å‘æ•ˆç‡é«˜ |

#### çŸ¥ååº”ç”¨æ¡ˆä¾‹

| æŠ€æœ¯ | çŸ¥ååº”ç”¨ | ç‰¹ç‚¹ |
|------|----------|------|
| **React Native** | Facebook, Instagram, Uber Eats | å†…å®¹å±•ç¤ºã€ç¤¾äº¤åº”ç”¨ |
| **Flutter** | Google Pay, Alibaba, BMW | å¤æ‚äº¤äº’ã€é‡‘èåº”ç”¨ |
| **åŸç”Ÿ** | å¾®ä¿¡, æ”¯ä»˜å®, ç‹è€…è£è€€ | é«˜æ€§èƒ½ã€å¹³å°ç‰¹å®šåŠŸèƒ½ |

#### æŠ€æœ¯é€‰æ‹©å†³ç­–æµç¨‹

```javascript
// ç®€åŒ–çš„æŠ€æœ¯é€‰æ‹©é€»è¾‘
function chooseMobileTechnology(requirements) {
  const { teamSkills, performance, timeline, budget } = requirements;

  // é«˜æ€§èƒ½è¦æ±‚
  if (performance === 'critical') {
    return 'Native Development';
  }

  // ReactæŠ€æœ¯æ ˆ
  if (teamSkills.includes('react') && timeline === 'short') {
    return 'React Native';
  }

  // å¤æ‚UIéœ€æ±‚
  if (requirements.uiComplexity === 'high') {
    return 'Flutter';
  }

  // é¢„ç®—æœ‰é™
  if (budget === 'limited') {
    return 'Ionic';
  }

  return 'React Native'; // é»˜è®¤æ¨è
}
```

## React Nativeæ·±å…¥å¼€å‘

### React Nativeæ¶æ„å’Œç»„ä»¶

```typescript
// 1. æ ¸å¿ƒç»„ä»¶å’ŒAPIä½¿ç”¨
import React, { useState, useEffect, useCallback } from 'react';
import {
  View,
  Text,
  ScrollView,
  FlatList,
  Image,
  TouchableOpacity,
  StyleSheet,
  Dimensions,
  Platform,
  Alert,
  Linking,
  Share
} from 'react-native';
import { SafeAreaProvider, SafeAreaView } from 'react-native-safe-area-context';
import AsyncStorage from '@react-native-async-storage/async-storage';

// è·å–è®¾å¤‡ä¿¡æ¯
const { width: screenWidth, height: screenHeight } = Dimensions.get('window');
const isIOS = Platform.OS === 'ios';
const isAndroid = Platform.OS === 'android';

// ç”¨æˆ·åˆ—è¡¨ç»„ä»¶
interface User {
  id: string;
  name: string;
  email: string;
  avatar: string;
  isOnline: boolean;
}

interface UserListProps {
  users: User[];
  onUserPress: (user: User) => void;
  onRefresh: () => Promise<void>;
}

const UserList: React.FC<UserListProps> = ({ users, onUserPress, onRefresh }) => {
  const [refreshing, setRefreshing] = useState(false);
  
  const handleRefresh = useCallback(async () => {
    setRefreshing(true);
    try {
      await onRefresh();
    } finally {
      setRefreshing(false);
    }
  }, [onRefresh]);
  
  const renderUser = useCallback(({ item }: { item: User }) => (
    <TouchableOpacity
      style={styles.userItem}
      onPress={() => onUserPress(item)}
      activeOpacity={0.7}
    >
      <Image source={{ uri: item.avatar }} style={styles.avatar} />
      <View style={styles.userInfo}>
        <Text style={styles.userName}>{item.name}</Text>
        <Text style={styles.userEmail}>{item.email}</Text>
      </View>
      <View style={[
        styles.onlineIndicator,
        { backgroundColor: item.isOnline ? '#4CAF50' : '#9E9E9E' }
      ]} />
    </TouchableOpacity>
  ), [onUserPress]);
  
  const keyExtractor = useCallback((item: User) => item.id, []);
  
  return (
    <FlatList
      data={users}
      renderItem={renderUser}
      keyExtractor={keyExtractor}
      refreshing={refreshing}
      onRefresh={handleRefresh}
      showsVerticalScrollIndicator={false}
      contentContainerStyle={styles.listContainer}
      ItemSeparatorComponent={() => <View style={styles.separator} />}
      ListEmptyComponent={() => (
        <View style={styles.emptyContainer}>
          <Text style={styles.emptyText}>æš‚æ— ç”¨æˆ·æ•°æ®</Text>
        </View>
      )}
    />
  );
};

// ä¸»åº”ç”¨ç»„ä»¶
const App: React.FC = () => {
  const [users, setUsers] = useState<User[]>([]);
  const [loading, setLoading] = useState(true);
  
  useEffect(() => {
    loadUsers();
  }, []);
  
  const loadUsers = async () => {
    try {
      setLoading(true);
      
      // ä»æœ¬åœ°å­˜å‚¨åŠ è½½ç¼“å­˜æ•°æ®
      const cachedUsers = await AsyncStorage.getItem('users');
      if (cachedUsers) {
        setUsers(JSON.parse(cachedUsers));
      }
      
      // ä»APIè·å–æœ€æ–°æ•°æ®
      const response = await fetch('https://api.example.com/users');
      const freshUsers = await response.json();
      
      setUsers(freshUsers);
      
      // ç¼“å­˜åˆ°æœ¬åœ°å­˜å‚¨
      await AsyncStorage.setItem('users', JSON.stringify(freshUsers));
    } catch (error) {
      console.error('åŠ è½½ç”¨æˆ·å¤±è´¥:', error);
      Alert.alert('é”™è¯¯', 'åŠ è½½ç”¨æˆ·æ•°æ®å¤±è´¥');
    } finally {
      setLoading(false);
    }
  };
  
  const handleUserPress = useCallback((user: User) => {
    Alert.alert(
      user.name,
      `é‚®ç®±: ${user.email}`,
      [
        { text: 'å–æ¶ˆ', style: 'cancel' },
        {
          text: 'å‘é€é‚®ä»¶',
          onPress: () => {
            Linking.openURL(`mailto:${user.email}`);
          }
        },
        {
          text: 'åˆ†äº«',
          onPress: () => {
            Share.share({
              message: `æ¨èç”¨æˆ·: ${user.name} (${user.email})`,
              title: 'ç”¨æˆ·åˆ†äº«'
            });
          }
        }
      ]
    );
  }, []);
  
  const handleRefresh = useCallback(async () => {
    await loadUsers();
  }, []);
  
  if (loading) {
    return (
      <SafeAreaView style={styles.container}>
        <View style={styles.loadingContainer}>
          <Text>åŠ è½½ä¸­...</Text>
        </View>
      </SafeAreaView>
    );
  }
  
  return (
    <SafeAreaProvider>
      <SafeAreaView style={styles.container}>
        <View style={styles.header}>
          <Text style={styles.headerTitle}>ç”¨æˆ·åˆ—è¡¨</Text>
        </View>
        
        <UserList
          users={users}
          onUserPress={handleUserPress}
          onRefresh={handleRefresh}
        />
      </SafeAreaView>
    </SafeAreaProvider>
  );
};

// æ ·å¼å®šä¹‰
const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#f5f5f5'
  },
  header: {
    backgroundColor: '#2196F3',
    paddingVertical: 16,
    paddingHorizontal: 20,
    ...Platform.select({
      ios: {
        shadowColor: '#000',
        shadowOffset: { width: 0, height: 2 },
        shadowOpacity: 0.1,
        shadowRadius: 4
      },
      android: {
        elevation: 4
      }
    })
  },
  headerTitle: {
    fontSize: 20,
    fontWeight: 'bold',
    color: '#fff',
    textAlign: 'center'
  },
  loadingContainer: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center'
  },
  listContainer: {
    padding: 16
  },
  userItem: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: '#fff',
    padding: 16,
    borderRadius: 8,
    ...Platform.select({
      ios: {
        shadowColor: '#000',
        shadowOffset: { width: 0, height: 1 },
        shadowOpacity: 0.1,
        shadowRadius: 2
      },
      android: {
        elevation: 2
      }
    })
  },
  avatar: {
    width: 50,
    height: 50,
    borderRadius: 25,
    marginRight: 12
  },
  userInfo: {
    flex: 1
  },
  userName: {
    fontSize: 16,
    fontWeight: '600',
    color: '#333',
    marginBottom: 4
  },
  userEmail: {
    fontSize: 14,
    color: '#666'
  },
  onlineIndicator: {
    width: 12,
    height: 12,
    borderRadius: 6
  },
  separator: {
    height: 12
  },
  emptyContainer: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    paddingVertical: 50
  },
  emptyText: {
    fontSize: 16,
    color: '#999'
  }
});

export default App;
```

### å¯¼èˆªå’ŒçŠ¶æ€ç®¡ç†

```typescript
// 1. React Navigationè®¾ç½®
import React from 'react';
import { NavigationContainer } from '@react-navigation/native';
import { createNativeStackNavigator } from '@react-navigation/native-stack';
import { createBottomTabNavigator } from '@react-navigation/bottom-tabs';
import { createDrawerNavigator } from '@react-navigation/drawer';
import Icon from 'react-native-vector-icons/MaterialIcons';

// ç±»å‹å®šä¹‰
export type RootStackParamList = {
  Main: undefined;
  UserDetail: { userId: string };
  Settings: undefined;
};

export type TabParamList = {
  Home: undefined;
  Users: undefined;
  Profile: undefined;
};

const Stack = createNativeStackNavigator<RootStackParamList>();
const Tab = createBottomTabNavigator<TabParamList>();
const Drawer = createDrawerNavigator();

// æ ‡ç­¾é¡µå¯¼èˆª
function TabNavigator() {
  return (
    <Tab.Navigator
      screenOptions={({ route }) => ({
        tabBarIcon: ({ focused, color, size }) => {
          let iconName: string;
          
          switch (route.name) {
            case 'Home':
              iconName = 'home';
              break;
            case 'Users':
              iconName = 'people';
              break;
            case 'Profile':
              iconName = 'person';
              break;
            default:
              iconName = 'help';
          }
          
          return <Icon name={iconName} size={size} color={color} />;
        },
        tabBarActiveTintColor: '#2196F3',
        tabBarInactiveTintColor: '#999',
        headerShown: false
      })}
    >
      <Tab.Screen name="Home" component={HomeScreen} />
      <Tab.Screen name="Users" component={UsersScreen} />
      <Tab.Screen name="Profile" component={ProfileScreen} />
    </Tab.Navigator>
  );
}

// ä¸»å¯¼èˆª
function AppNavigator() {
  return (
    <NavigationContainer>
      <Stack.Navigator
        initialRouteName="Main"
        screenOptions={{
          headerStyle: {
            backgroundColor: '#2196F3'
          },
          headerTintColor: '#fff',
          headerTitleStyle: {
            fontWeight: 'bold'
          }
        }}
      >
        <Stack.Screen 
          name="Main" 
          component={TabNavigator}
          options={{ headerShown: false }}
        />
        <Stack.Screen 
          name="UserDetail" 
          component={UserDetailScreen}
          options={({ route }) => ({
            title: 'ç”¨æˆ·è¯¦æƒ…',
            headerBackTitle: 'è¿”å›'
          })}
        />
        <Stack.Screen 
          name="Settings" 
          component={SettingsScreen}
          options={{
            title: 'è®¾ç½®',
            presentation: 'modal'
          }}
        />
      </Stack.Navigator>
    </NavigationContainer>
  );
}

// 2. Redux ToolkitçŠ¶æ€ç®¡ç†
import { configureStore, createSlice, createAsyncThunk } from '@reduxjs/toolkit';
import { Provider, useSelector, useDispatch } from 'react-redux';

// å¼‚æ­¥æ“ä½œ
export const fetchUsers = createAsyncThunk(
  'users/fetchUsers',
  async (_, { rejectWithValue }) => {
    try {
      const response = await fetch('https://api.example.com/users');
      if (!response.ok) {
        throw new Error('ç½‘ç»œè¯·æ±‚å¤±è´¥');
      }
      return await response.json();
    } catch (error) {
      return rejectWithValue(error.message);
    }
  }
);

// ç”¨æˆ·çŠ¶æ€åˆ‡ç‰‡
const usersSlice = createSlice({
  name: 'users',
  initialState: {
    items: [] as User[],
    loading: false,
    error: null as string | null
  },
  reducers: {
    clearError: (state) => {
      state.error = null;
    },
    updateUser: (state, action) => {
      const { id, updates } = action.payload;
      const userIndex = state.items.findIndex(user => user.id === id);
      if (userIndex !== -1) {
        state.items[userIndex] = { ...state.items[userIndex], ...updates };
      }
    }
  },
  extraReducers: (builder) => {
    builder
      .addCase(fetchUsers.pending, (state) => {
        state.loading = true;
        state.error = null;
      })
      .addCase(fetchUsers.fulfilled, (state, action) => {
        state.loading = false;
        state.items = action.payload;
      })
      .addCase(fetchUsers.rejected, (state, action) => {
        state.loading = false;
        state.error = action.payload as string;
      });
  }
});

export const { clearError, updateUser } = usersSlice.actions;

// Storeé…ç½®
const store = configureStore({
  reducer: {
    users: usersSlice.reducer
  },
  middleware: (getDefaultMiddleware) =>
    getDefaultMiddleware({
      serializableCheck: {
        ignoredActions: ['persist/PERSIST']
      }
    })
});

export type RootState = ReturnType<typeof store.getState>;
export type AppDispatch = typeof store.dispatch;

// 3. è‡ªå®šä¹‰Hooks
import { useSelector, useDispatch } from 'react-redux';
import { useFocusEffect } from '@react-navigation/native';

export const useAppSelector = useSelector.withTypes<RootState>();
export const useAppDispatch = useDispatch.withTypes<AppDispatch>();

// ç”¨æˆ·æ•°æ®Hook
export function useUsers() {
  const dispatch = useAppDispatch();
  const { items: users, loading, error } = useAppSelector(state => state.users);
  
  const loadUsers = useCallback(() => {
    dispatch(fetchUsers());
  }, [dispatch]);
  
  const updateUserData = useCallback((id: string, updates: Partial<User>) => {
    dispatch(updateUser({ id, updates }));
  }, [dispatch]);
  
  const clearErrorMessage = useCallback(() => {
    dispatch(clearError());
  }, [dispatch]);
  
  // é¡µé¢èšç„¦æ—¶åˆ·æ–°æ•°æ®
  useFocusEffect(
    useCallback(() => {
      loadUsers();
    }, [loadUsers])
  );
  
  return {
    users,
    loading,
    error,
    loadUsers,
    updateUserData,
    clearErrorMessage
  };
}

// è®¾å¤‡ä¿¡æ¯Hook
export function useDeviceInfo() {
  const [deviceInfo, setDeviceInfo] = useState({
    width: screenWidth,
    height: screenHeight,
    isLandscape: false
  });
  
  useEffect(() => {
    const subscription = Dimensions.addEventListener('change', ({ window }) => {
      setDeviceInfo({
        width: window.width,
        height: window.height,
        isLandscape: window.width > window.height
      });
    });
    
    return () => subscription?.remove();
  }, []);
  
  return deviceInfo;
}

// 4. åº”ç”¨å…¥å£
function App() {
  return (
    <Provider store={store}>
      <AppNavigator />
    </Provider>
  );
}

export default App;
```

### åŸç”Ÿæ¨¡å—é›†æˆ

```typescript
// 1. åŸç”Ÿæ¨¡å—æ¡¥æ¥ (iOS)
// ios/MyApp/NativeModule.h
#import <React/RCTBridgeModule.h>
#import <React/RCTEventEmitter.h>

@interface NativeModule : RCTEventEmitter <RCTBridgeModule>
@end

// ios/MyApp/NativeModule.m
#import "NativeModule.h"
#import <React/RCTLog.h>

@implementation NativeModule

RCT_EXPORT_MODULE();

// æ”¯æŒäº‹ä»¶å‘é€
- (NSArray<NSString *> *)supportedEvents {
  return @[@"onLocationUpdate", @"onBatteryChange"];
}

// è·å–è®¾å¤‡ä¿¡æ¯
RCT_EXPORT_METHOD(getDeviceInfo:(RCTPromiseResolveBlock)resolve
                  rejecter:(RCTPromiseRejectBlock)reject) {
  @try {
    UIDevice *device = [UIDevice currentDevice];
    NSDictionary *deviceInfo = @{
      @"name": device.name,
      @"model": device.model,
      @"systemName": device.systemName,
      @"systemVersion": device.systemVersion,
      @"batteryLevel": @(device.batteryLevel)
    };
    resolve(deviceInfo);
  } @catch (NSException *exception) {
    reject(@"device_info_error", @"Failed to get device info", nil);
  }
}

// æ˜¾ç¤ºåŸç”Ÿå¼¹çª—
RCT_EXPORT_METHOD(showNativeAlert:(NSString *)title
                  message:(NSString *)message
                  resolver:(RCTPromiseResolveBlock)resolve
                  rejecter:(RCTPromiseRejectBlock)reject) {
  dispatch_async(dispatch_get_main_queue(), ^{
    UIAlertController *alert = [UIAlertController 
      alertControllerWithTitle:title 
      message:message 
      preferredStyle:UIAlertControllerStyleAlert];
    
    UIAlertAction *okAction = [UIAlertAction 
      actionWithTitle:@"ç¡®å®š" 
      style:UIAlertActionStyleDefault 
      handler:^(UIAlertAction * action) {
        resolve(@"ok");
      }];
    
    [alert addAction:okAction];
    
    UIViewController *rootViewController = [UIApplication sharedApplication].delegate.window.rootViewController;
    [rootViewController presentViewController:alert animated:YES completion:nil];
  });
}

@end

// 2. åŸç”Ÿæ¨¡å—æ¡¥æ¥ (Android)
// android/app/src/main/java/com/myapp/NativeModule.java
package com.myapp;

import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.bridge.ReactContextBaseJavaModule;
import com.facebook.react.bridge.ReactMethod;
import com.facebook.react.bridge.Promise;
import com.facebook.react.bridge.WritableMap;
import com.facebook.react.bridge.Arguments;
import com.facebook.react.modules.core.DeviceEventManagerModule;

import android.os.Build;
import android.content.Context;
import android.app.AlertDialog;

public class NativeModule extends ReactContextBaseJavaModule {
    private ReactApplicationContext reactContext;
    
    public NativeModule(ReactApplicationContext reactContext) {
        super(reactContext);
        this.reactContext = reactContext;
    }
    
    @Override
    public String getName() {
        return "NativeModule";
    }
    
    @ReactMethod
    public void getDeviceInfo(Promise promise) {
        try {
            WritableMap deviceInfo = Arguments.createMap();
            deviceInfo.putString("manufacturer", Build.MANUFACTURER);
            deviceInfo.putString("model", Build.MODEL);
            deviceInfo.putString("version", Build.VERSION.RELEASE);
            deviceInfo.putInt("sdkVersion", Build.VERSION.SDK_INT);
            
            promise.resolve(deviceInfo);
        } catch (Exception e) {
            promise.reject("device_info_error", "Failed to get device info", e);
        }
    }
    
    @ReactMethod
    public void showNativeAlert(String title, String message, Promise promise) {
        getCurrentActivity().runOnUiThread(new Runnable() {
            @Override
            public void run() {
                AlertDialog.Builder builder = new AlertDialog.Builder(getCurrentActivity());
                builder.setTitle(title)
                       .setMessage(message)
                       .setPositiveButton("ç¡®å®š", (dialog, which) -> {
                           promise.resolve("ok");
                       })
                       .show();
            }
        });
    }
    
    // å‘é€äº‹ä»¶åˆ°JavaScript
    private void sendEvent(String eventName, WritableMap params) {
        reactContext
            .getJSModule(DeviceEventManagerModule.RCTDeviceEventEmitter.class)
            .emit(eventName, params);
    }
}

// 3. JavaScriptç«¯ä½¿ç”¨
import { NativeModules, NativeEventEmitter } from 'react-native';

const { NativeModule } = NativeModules;
const nativeEventEmitter = new NativeEventEmitter(NativeModule);

// åŸç”Ÿæ¨¡å—Hook
export function useNativeModule() {
  const [deviceInfo, setDeviceInfo] = useState(null);
  
  useEffect(() => {
    // è·å–è®¾å¤‡ä¿¡æ¯
    NativeModule.getDeviceInfo()
      .then(setDeviceInfo)
      .catch(console.error);
    
    // ç›‘å¬åŸç”Ÿäº‹ä»¶
    const locationSubscription = nativeEventEmitter.addListener(
      'onLocationUpdate',
      (location) => {
        console.log('ä½ç½®æ›´æ–°:', location);
      }
    );
    
    const batterySubscription = nativeEventEmitter.addListener(
      'onBatteryChange',
      (battery) => {
        console.log('ç”µæ± çŠ¶æ€:', battery);
      }
    );
    
    return () => {
      locationSubscription.remove();
      batterySubscription.remove();
    };
  }, []);
  
  const showNativeAlert = useCallback(async (title: string, message: string) => {
    try {
      const result = await NativeModule.showNativeAlert(title, message);
      console.log('å¼¹çª—ç»“æœ:', result);
    } catch (error) {
      console.error('æ˜¾ç¤ºå¼¹çª—å¤±è´¥:', error);
    }
  }, []);
  
  return {
    deviceInfo,
    showNativeAlert
  };
}

// ä½¿ç”¨ç¤ºä¾‹
function DeviceInfoScreen() {
  const { deviceInfo, showNativeAlert } = useNativeModule();
  
  const handleShowAlert = () => {
    showNativeAlert('åŸç”Ÿå¼¹çª—', 'è¿™æ˜¯æ¥è‡ªåŸç”Ÿæ¨¡å—çš„å¼¹çª—');
  };
  
  return (
    <View style={styles.container}>
      <Text style={styles.title}>è®¾å¤‡ä¿¡æ¯</Text>
      
      {deviceInfo && (
        <View style={styles.infoContainer}>
          <Text>è®¾å¤‡å‹å·: {deviceInfo.model}</Text>
          <Text>ç³»ç»Ÿç‰ˆæœ¬: {deviceInfo.systemVersion || deviceInfo.version}</Text>
          <Text>åˆ¶é€ å•†: {deviceInfo.manufacturer}</Text>
        </View>
      )}
      
      <TouchableOpacity style={styles.button} onPress={handleShowAlert}>
        <Text style={styles.buttonText}>æ˜¾ç¤ºåŸç”Ÿå¼¹çª—</Text>
      </TouchableOpacity>
    </View>
  );
}
```

## Flutterè·¨å¹³å°å¼€å‘

<Callout type="info">
[Flutter](https://flutter.dev/)æ˜¯Googleå¼€å‘çš„è·¨å¹³å°UIæ¡†æ¶ï¼Œä½¿ç”¨Dartè¯­è¨€ï¼Œèƒ½å¤Ÿåˆ›å»ºé«˜æ€§èƒ½çš„åŸç”Ÿåº”ç”¨ã€‚
</Callout>

### FlutteråŸºç¡€å¼€å‘

```dart
// 1. Flutteråº”ç”¨ç»“æ„
import 'package:flutter/material.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Demo',
      theme: ThemeData(
        primarySwatch: Colors.blue,
        visualDensity: VisualDensity.adaptivePlatformDensity,
      ),
      home: HomeScreen(),
    );
  }
}

// 2. çŠ¶æ€ç®¡ç† - Provideræ¨¡å¼
class UserModel extends ChangeNotifier {
  User? _user;
  bool _isLoading = false;
  String? _error;

  User? get user => _user;
  bool get isLoading => _isLoading;
  String? get error => _error;

  Future<void> fetchUser(String userId) async {
    _isLoading = true;
    _error = null;
    notifyListeners();

    try {
      _user = await UserService.getUser(userId);
    } catch (e) {
      _error = e.toString();
    } finally {
      _isLoading = false;
      notifyListeners();
    }
  }

  void updateUser(User user) {
    _user = user;
    notifyListeners();
  }
}

// 3. å“åº”å¼UIç»„ä»¶
class UserProfileScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('ç”¨æˆ·èµ„æ–™'),
        actions: [
          IconButton(
            icon: Icon(Icons.edit),
            onPressed: () => _editProfile(context),
          ),
        ],
      ),
      body: Consumer<UserModel>(
        builder: (context, userModel, child) {
          if (userModel.isLoading) {
            return Center(child: CircularProgressIndicator());
          }

          if (userModel.error != null) {
            return Center(
              child: Column(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  Icon(Icons.error, size: 64, color: Colors.red),
                  SizedBox(height: 16),
                  Text(userModel.error!),
                  ElevatedButton(
                    onPressed: () => userModel.fetchUser('current'),
                    child: Text('é‡è¯•'),
                  ),
                ],
              ),
            );
          }

          final user = userModel.user;
          if (user == null) {
            return Center(child: Text('ç”¨æˆ·ä¿¡æ¯ä¸å­˜åœ¨'));
          }

          return SingleChildScrollView(
            padding: EdgeInsets.all(16),
            child: Column(
              children: [
                CircleAvatar(
                  radius: 50,
                  backgroundImage: NetworkImage(user.avatar),
                ),
                SizedBox(height: 16),
                Text(
                  user.name,
                  style: Theme.of(context).textTheme.headline5,
                ),
                SizedBox(height: 8),
                Text(
                  user.email,
                  style: Theme.of(context).textTheme.subtitle1,
                ),
                SizedBox(height: 24),
                _buildInfoCard(context, user),
              ],
            ),
          );
        },
      ),
    );
  }

  Widget _buildInfoCard(BuildContext context, User user) {
    return Card(
      child: Padding(
        padding: EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(
              'ä¸ªäººä¿¡æ¯',
              style: Theme.of(context).textTheme.headline6,
            ),
            SizedBox(height: 16),
            _buildInfoRow('æ‰‹æœºå·', user.phone),
            _buildInfoRow('ç”Ÿæ—¥', user.birthday),
            _buildInfoRow('åœ°å€', user.address),
          ],
        ),
      ),
    );
  }

  Widget _buildInfoRow(String label, String value) {
    return Padding(
      padding: EdgeInsets.symmetric(vertical: 8),
      child: Row(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          SizedBox(
            width: 80,
            child: Text(
              label,
              style: TextStyle(fontWeight: FontWeight.bold),
            ),
          ),
          Expanded(child: Text(value)),
        ],
      ),
    );
  }

  void _editProfile(BuildContext context) {
    Navigator.push(
      context,
      MaterialPageRoute(builder: (context) => EditProfileScreen()),
    );
  }
}

// 4. è‡ªå®šä¹‰Widget
class AnimatedCounter extends StatefulWidget {
  final int value;
  final Duration duration;

  const AnimatedCounter({
    Key? key,
    required this.value,
    this.duration = const Duration(milliseconds: 500),
  }) : super(key: key);

  @override
  _AnimatedCounterState createState() => _AnimatedCounterState();
}

class _AnimatedCounterState extends State<AnimatedCounter>
    with SingleTickerProviderStateMixin {
  late AnimationController _controller;
  late Animation<double> _animation;
  int _previousValue = 0;

  @override
  void initState() {
    super.initState();
    _controller = AnimationController(
      duration: widget.duration,
      vsync: this,
    );
    _animation = Tween<double>(
      begin: 0,
      end: widget.value.toDouble(),
    ).animate(CurvedAnimation(
      parent: _controller,
      curve: Curves.easeInOut,
    ));
    _controller.forward();
  }

  @override
  void didUpdateWidget(AnimatedCounter oldWidget) {
    super.didUpdateWidget(oldWidget);
    if (oldWidget.value != widget.value) {
      _previousValue = oldWidget.value;
      _animation = Tween<double>(
        begin: _previousValue.toDouble(),
        end: widget.value.toDouble(),
      ).animate(CurvedAnimation(
        parent: _controller,
        curve: Curves.easeInOut,
      ));
      _controller.reset();
      _controller.forward();
    }
  }

  @override
  void dispose() {
    _controller.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return AnimatedBuilder(
      animation: _animation,
      builder: (context, child) {
        return Text(
          _animation.value.round().toString(),
          style: Theme.of(context).textTheme.headline4,
        );
      },
    );
  }
}
```

## æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

<Callout type="warning">
ç§»åŠ¨ç«¯åº”ç”¨çš„æ€§èƒ½ä¼˜åŒ–éœ€è¦è€ƒè™‘è®¾å¤‡æ€§èƒ½é™åˆ¶ã€ç½‘ç»œç¯å¢ƒã€ç”µæ± æ¶ˆè€—ç­‰å¤šä¸ªå› ç´ ã€‚
</Callout>

### React Nativeæ€§èƒ½ä¼˜åŒ–

```javascript
// 1. åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–
import React, { memo, useCallback, useMemo } from 'react';
import { FlatList, VirtualizedList } from 'react-native';

// ä½¿ç”¨memoä¼˜åŒ–åˆ—è¡¨é¡¹
const ListItem = memo(({ item, onPress }) => {
  const handlePress = useCallback(() => {
    onPress(item.id);
  }, [item.id, onPress]);

  return (
    <TouchableOpacity onPress={handlePress} style={styles.listItem}>
      <Image source={{ uri: item.avatar }} style={styles.avatar} />
      <View style={styles.content}>
        <Text style={styles.name}>{item.name}</Text>
        <Text style={styles.email}>{item.email}</Text>
      </View>
    </TouchableOpacity>
  );
});

// ä¼˜åŒ–çš„åˆ—è¡¨ç»„ä»¶
function OptimizedUserList({ users, onUserPress }) {
  const keyExtractor = useCallback((item) => item.id, []);

  const renderItem = useCallback(({ item }) => (
    <ListItem item={item} onPress={onUserPress} />
  ), [onUserPress]);

  const getItemLayout = useCallback((data, index) => ({
    length: 80, // å›ºå®šé«˜åº¦
    offset: 80 * index,
    index,
  }), []);

  return (
    <FlatList
      data={users}
      renderItem={renderItem}
      keyExtractor={keyExtractor}
      getItemLayout={getItemLayout}
      removeClippedSubviews={true}
      maxToRenderPerBatch={10}
      windowSize={10}
      initialNumToRender={10}
      updateCellsBatchingPeriod={50}
    />
  );
}

// 2. å›¾ç‰‡ä¼˜åŒ–
import FastImage from 'react-native-fast-image';

function OptimizedImage({ uri, style, placeholder }) {
  return (
    <FastImage
      style={style}
      source={{
        uri,
        priority: FastImage.priority.normal,
        cache: FastImage.cacheControl.immutable,
      }}
      defaultSource={placeholder}
      resizeMode={FastImage.resizeMode.cover}
    />
  );
}

// 3. åŠ¨ç”»æ€§èƒ½ä¼˜åŒ–
import Animated, {
  useSharedValue,
  useAnimatedStyle,
  withSpring,
  runOnJS,
} from 'react-native-reanimated';

function AnimatedButton({ onPress, children }) {
  const scale = useSharedValue(1);
  const opacity = useSharedValue(1);

  const animatedStyle = useAnimatedStyle(() => ({
    transform: [{ scale: scale.value }],
    opacity: opacity.value,
  }));

  const handlePressIn = () => {
    scale.value = withSpring(0.95);
    opacity.value = withSpring(0.8);
  };

  const handlePressOut = () => {
    scale.value = withSpring(1);
    opacity.value = withSpring(1);
  };

  const handlePress = () => {
    runOnJS(onPress)();
  };

  return (
    <Animated.View style={animatedStyle}>
      <TouchableWithoutFeedback
        onPressIn={handlePressIn}
        onPressOut={handlePressOut}
        onPress={handlePress}
      >
        <View style={styles.button}>
          {children}
        </View>
      </TouchableWithoutFeedback>
    </Animated.View>
  );
}

// 4. å†…å­˜ç®¡ç†
class MemoryOptimizedComponent extends Component {
  constructor(props) {
    super(props);
    this.subscriptions = [];
  }

  componentDidMount() {
    // è®¢é˜…ç®¡ç†
    const subscription = EventEmitter.addListener('dataUpdate', this.handleDataUpdate);
    this.subscriptions.push(subscription);
  }

  componentWillUnmount() {
    // æ¸…ç†è®¢é˜…
    this.subscriptions.forEach(subscription => {
      subscription.remove();
    });
    this.subscriptions = [];
  }

  handleDataUpdate = (data) => {
    // å¤„ç†æ•°æ®æ›´æ–°
  };

  render() {
    return (
      <View>
        {/* ç»„ä»¶å†…å®¹ */}
      </View>
    );
  }
}
```

### Flutteræ€§èƒ½ä¼˜åŒ–

```dart
// 1. Widgetä¼˜åŒ–
class OptimizedListView extends StatelessWidget {
  final List<Item> items;
  final Function(Item) onItemTap;

  const OptimizedListView({
    Key? key,
    required this.items,
    required this.onItemTap,
  }) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return ListView.builder(
      itemCount: items.length,
      itemBuilder: (context, index) {
        final item = items[index];
        return ListItemWidget(
          key: ValueKey(item.id), // ä½¿ç”¨ç¨³å®šçš„key
          item: item,
          onTap: () => onItemTap(item),
        );
      },
      // æ€§èƒ½ä¼˜åŒ–é…ç½®
      cacheExtent: 200.0,
      addAutomaticKeepAlives: false,
      addRepaintBoundaries: false,
    );
  }
}

// 2. çŠ¶æ€ç®¡ç†ä¼˜åŒ–
class OptimizedCounter extends StatefulWidget {
  @override
  _OptimizedCounterState createState() => _OptimizedCounterState();
}

class _OptimizedCounterState extends State<OptimizedCounter> {
  int _counter = 0;

  void _incrementCounter() {
    setState(() {
      _counter++;
    });
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Column(
        children: [
          // ä½¿ç”¨constæ„é€ å‡½æ•°é¿å…é‡å»º
          const Text('è®¡æ•°å™¨åº”ç”¨'),

          // å°†å˜åŒ–çš„éƒ¨åˆ†åˆ†ç¦»
          CounterDisplay(counter: _counter),

          // é™æ€éƒ¨åˆ†ä½¿ç”¨const
          const SizedBox(height: 20),
        ],
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: _incrementCounter,
        child: const Icon(Icons.add),
      ),
    );
  }
}

class CounterDisplay extends StatelessWidget {
  final int counter;

  const CounterDisplay({Key? key, required this.counter}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Text(
      '$counter',
      style: Theme.of(context).textTheme.headline4,
    );
  }
}

// 3. å›¾ç‰‡ç¼“å­˜ä¼˜åŒ–
class CachedNetworkImageWidget extends StatelessWidget {
  final String imageUrl;
  final double? width;
  final double? height;

  const CachedNetworkImageWidget({
    Key? key,
    required this.imageUrl,
    this.width,
    this.height,
  }) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return CachedNetworkImage(
      imageUrl: imageUrl,
      width: width,
      height: height,
      placeholder: (context, url) => Container(
        width: width,
        height: height,
        color: Colors.grey[300],
        child: const Center(
          child: CircularProgressIndicator(),
        ),
      ),
      errorWidget: (context, url, error) => Container(
        width: width,
        height: height,
        color: Colors.grey[300],
        child: const Icon(Icons.error),
      ),
      memCacheWidth: width?.toInt(),
      memCacheHeight: height?.toInt(),
    );
  }
}

// 4. å¼‚æ­¥æ“ä½œä¼˜åŒ–
class DataService {
  static final Map<String, dynamic> _cache = {};
  static final Map<String, Future<dynamic>> _pendingRequests = {};

  static Future<T> fetchData<T>(
    String key,
    Future<T> Function() fetcher, {
    Duration? cacheDuration,
  }) async {
    // æ£€æŸ¥ç¼“å­˜
    if (_cache.containsKey(key)) {
      final cachedData = _cache[key];
      if (cachedData['expiry'] == null ||
          DateTime.now().isBefore(cachedData['expiry'])) {
        return cachedData['data'] as T;
      }
    }

    // æ£€æŸ¥æ˜¯å¦æœ‰æ­£åœ¨è¿›è¡Œçš„è¯·æ±‚
    if (_pendingRequests.containsKey(key)) {
      return await _pendingRequests[key] as T;
    }

    // åˆ›å»ºæ–°è¯·æ±‚
    final future = fetcher();
    _pendingRequests[key] = future;

    try {
      final data = await future;

      // ç¼“å­˜ç»“æœ
      _cache[key] = {
        'data': data,
        'expiry': cacheDuration != null
          ? DateTime.now().add(cacheDuration)
          : null,
      };

      return data;
    } finally {
      _pendingRequests.remove(key);
    }
  }

  static void clearCache() {
    _cache.clear();
  }
}
```

## å‘å¸ƒå’Œåˆ†å‘

<Callout type="info">
ç§»åŠ¨åº”ç”¨çš„å‘å¸ƒå’Œåˆ†å‘æ¶‰åŠåº”ç”¨å•†åº—å®¡æ ¸ã€ç‰ˆæœ¬ç®¡ç†ã€æŒç»­é›†æˆç­‰å¤šä¸ªç¯èŠ‚ã€‚
</Callout>

### React Nativeåº”ç”¨å‘å¸ƒ

```bash
# 1. Androidå‘å¸ƒæµç¨‹
# ç”Ÿæˆç­¾åå¯†é’¥
keytool -genkeypair -v -storetype PKCS12 -keystore my-upload-key.keystore -alias my-key-alias -keyalg RSA -keysize 2048 -validity 10000

# é…ç½®gradle.properties
MYAPP_UPLOAD_STORE_FILE=my-upload-key.keystore
MYAPP_UPLOAD_KEY_ALIAS=my-key-alias
MYAPP_UPLOAD_STORE_PASSWORD=*****
MYAPP_UPLOAD_KEY_PASSWORD=*****

# æ„å»ºå‘å¸ƒç‰ˆæœ¬
cd android
./gradlew bundleRelease

# 2. iOSå‘å¸ƒæµç¨‹
# é…ç½®Xcodeé¡¹ç›®
# 1. è®¾ç½®Bundle Identifier
# 2. é…ç½®Signing & Capabilities
# 3. è®¾ç½®ç‰ˆæœ¬å·å’Œæ„å»ºå·

# æ„å»ºArchive
xcodebuild -workspace ios/MyApp.xcworkspace -scheme MyApp -configuration Release archive -archivePath ios/build/MyApp.xcarchive

# å¯¼å‡ºIPA
xcodebuild -exportArchive -archivePath ios/build/MyApp.xcarchive -exportPath ios/build -exportOptionsPlist ios/ExportOptions.plist
```

```javascript
// 3. è‡ªåŠ¨åŒ–å‘å¸ƒè„šæœ¬
// scripts/release.js
const { execSync } = require('child_process');
const fs = require('fs');
const path = require('path');

class ReleaseManager {
  constructor(platform, buildType = 'release') {
    this.platform = platform;
    this.buildType = buildType;
    this.packageJson = require('../package.json');
  }

  async release() {
    console.log(`å¼€å§‹å‘å¸ƒ ${this.platform} åº”ç”¨...`);

    try {
      // 1. æ£€æŸ¥ç¯å¢ƒ
      await this.checkEnvironment();

      // 2. æ›´æ–°ç‰ˆæœ¬å·
      await this.updateVersion();

      // 3. æ„å»ºåº”ç”¨
      await this.buildApp();

      // 4. è¿è¡Œæµ‹è¯•
      await this.runTests();

      // 5. ä¸Šä¼ åˆ°åº”ç”¨å•†åº—
      await this.uploadToStore();

      console.log('å‘å¸ƒæˆåŠŸï¼');
    } catch (error) {
      console.error('å‘å¸ƒå¤±è´¥:', error);
      process.exit(1);
    }
  }

  async checkEnvironment() {
    console.log('æ£€æŸ¥å‘å¸ƒç¯å¢ƒ...');

    if (this.platform === 'android') {
      // æ£€æŸ¥Androidç¯å¢ƒ
      execSync('which keytool', { stdio: 'ignore' });
      execSync('which zipalign', { stdio: 'ignore' });
    } else if (this.platform === 'ios') {
      // æ£€æŸ¥iOSç¯å¢ƒ
      execSync('which xcodebuild', { stdio: 'ignore' });
      execSync('which xcrun', { stdio: 'ignore' });
    }
  }

  async updateVersion() {
    console.log('æ›´æ–°ç‰ˆæœ¬å·...');

    const currentVersion = this.packageJson.version;
    const versionParts = currentVersion.split('.');
    versionParts[2] = (parseInt(versionParts[2]) + 1).toString();
    const newVersion = versionParts.join('.');

    // æ›´æ–°package.json
    this.packageJson.version = newVersion;
    fs.writeFileSync(
      path.join(__dirname, '../package.json'),
      JSON.stringify(this.packageJson, null, 2)
    );

    // æ›´æ–°åŸç”Ÿé¡¹ç›®ç‰ˆæœ¬
    if (this.platform === 'android') {
      this.updateAndroidVersion(newVersion);
    } else if (this.platform === 'ios') {
      this.updateiOSVersion(newVersion);
    }
  }

  updateAndroidVersion(version) {
    const buildGradlePath = path.join(__dirname, '../android/app/build.gradle');
    let buildGradle = fs.readFileSync(buildGradlePath, 'utf8');

    // æ›´æ–°versionName
    buildGradle = buildGradle.replace(
      /versionName\s+"[^"]*"/,
      `versionName "${version}"`
    );

    // æ›´æ–°versionCode
    const versionCodeMatch = buildGradle.match(/versionCode\s+(\d+)/);
    if (versionCodeMatch) {
      const currentCode = parseInt(versionCodeMatch[1]);
      buildGradle = buildGradle.replace(
        /versionCode\s+\d+/,
        `versionCode ${currentCode + 1}`
      );
    }

    fs.writeFileSync(buildGradlePath, buildGradle);
  }

  updateiOSVersion(version) {
    const infoPlistPath = path.join(__dirname, '../ios/MyApp/Info.plist');
    let infoPlist = fs.readFileSync(infoPlistPath, 'utf8');

    // æ›´æ–°CFBundleShortVersionString
    infoPlist = infoPlist.replace(
      /<key>CFBundleShortVersionString<\/key>\s*<string>[^<]*<\/string>/,
      `<key>CFBundleShortVersionString</key>\n\t<string>${version}</string>`
    );

    fs.writeFileSync(infoPlistPath, infoPlist);
  }

  async buildApp() {
    console.log(`æ„å»º ${this.platform} åº”ç”¨...`);

    if (this.platform === 'android') {
      execSync('cd android && ./gradlew bundleRelease', { stdio: 'inherit' });
    } else if (this.platform === 'ios') {
      execSync(
        'xcodebuild -workspace ios/MyApp.xcworkspace -scheme MyApp -configuration Release archive -archivePath ios/build/MyApp.xcarchive',
        { stdio: 'inherit' }
      );
    }
  }

  async runTests() {
    console.log('è¿è¡Œæµ‹è¯•...');
    execSync('npm test', { stdio: 'inherit' });
  }

  async uploadToStore() {
    console.log(`ä¸Šä¼ åˆ° ${this.platform} åº”ç”¨å•†åº—...`);

    if (this.platform === 'android') {
      // ä½¿ç”¨Google Play Console APIæˆ–fastlane
      execSync('fastlane android deploy', { stdio: 'inherit' });
    } else if (this.platform === 'ios') {
      // ä½¿ç”¨App Store Connect APIæˆ–fastlane
      execSync('fastlane ios deploy', { stdio: 'inherit' });
    }
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const platform = process.argv[2];
if (!platform || !['android', 'ios'].includes(platform)) {
  console.error('è¯·æŒ‡å®šå¹³å°: node scripts/release.js [android|ios]');
  process.exit(1);
}

const releaseManager = new ReleaseManager(platform);
releaseManager.release();
```

### Flutteråº”ç”¨å‘å¸ƒ

```yaml
# pubspec.yamlç‰ˆæœ¬é…ç½®
name: my_flutter_app
description: A new Flutter project.
version: 1.0.0+1

# æ„å»ºé…ç½®
flutter:
  uses-material-design: true
  assets:
    - assets/images/
    - assets/icons/
```

```bash
# 1. Androidå‘å¸ƒ
# é…ç½®android/key.properties
storePassword=<password>
keyPassword=<password>
keyAlias=<alias>
storeFile=<keystore-file>

# æ„å»ºAPK
flutter build apk --release

# æ„å»ºApp Bundle (æ¨è)
flutter build appbundle --release

# 2. iOSå‘å¸ƒ
# æ„å»ºiOSåº”ç”¨
flutter build ios --release

# ä½¿ç”¨Xcode Archive
open ios/Runner.xcworkspace
```

```dart
// 3. ç‰ˆæœ¬ç®¡ç†å’Œæ›´æ–°æ£€æŸ¥
class AppUpdateService {
  static const String _currentVersion = '1.0.0';
  static const String _updateCheckUrl = 'https://api.example.com/app/version';

  static Future<UpdateInfo?> checkForUpdate() async {
    try {
      final response = await http.get(Uri.parse(_updateCheckUrl));
      if (response.statusCode == 200) {
        final data = json.decode(response.body);
        final latestVersion = data['latest_version'];
        final isForceUpdate = data['force_update'] ?? false;

        if (_isNewerVersion(latestVersion, _currentVersion)) {
          return UpdateInfo(
            latestVersion: latestVersion,
            currentVersion: _currentVersion,
            isForceUpdate: isForceUpdate,
            downloadUrl: data['download_url'],
            releaseNotes: data['release_notes'],
          );
        }
      }
    } catch (e) {
      print('æ£€æŸ¥æ›´æ–°å¤±è´¥: $e');
    }
    return null;
  }

  static bool _isNewerVersion(String latest, String current) {
    final latestParts = latest.split('.').map(int.parse).toList();
    final currentParts = current.split('.').map(int.parse).toList();

    for (int i = 0; i < latestParts.length; i++) {
      if (i >= currentParts.length) return true;
      if (latestParts[i] > currentParts[i]) return true;
      if (latestParts[i] < currentParts[i]) return false;
    }
    return false;
  }

  static Future<void> showUpdateDialog(
    BuildContext context,
    UpdateInfo updateInfo,
  ) async {
    return showDialog(
      context: context,
      barrierDismissible: !updateInfo.isForceUpdate,
      builder: (context) => AlertDialog(
        title: Text('å‘ç°æ–°ç‰ˆæœ¬'),
        content: Column(
          mainAxisSize: MainAxisSize.min,
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text('å½“å‰ç‰ˆæœ¬: ${updateInfo.currentVersion}'),
            Text('æœ€æ–°ç‰ˆæœ¬: ${updateInfo.latestVersion}'),
            SizedBox(height: 16),
            Text('æ›´æ–°å†…å®¹:'),
            Text(updateInfo.releaseNotes),
          ],
        ),
        actions: [
          if (!updateInfo.isForceUpdate)
            TextButton(
              onPressed: () => Navigator.pop(context),
              child: Text('ç¨åæ›´æ–°'),
            ),
          ElevatedButton(
            onPressed: () => _launchUpdate(updateInfo.downloadUrl),
            child: Text('ç«‹å³æ›´æ–°'),
          ),
        ],
      ),
    );
  }

  static void _launchUpdate(String downloadUrl) {
    // å¯åŠ¨åº”ç”¨å•†åº—æˆ–ä¸‹è½½é¡µé¢
    launch(downloadUrl);
  }
}

class UpdateInfo {
  final String latestVersion;
  final String currentVersion;
  final bool isForceUpdate;
  final String downloadUrl;
  final String releaseNotes;

  UpdateInfo({
    required this.latestVersion,
    required this.currentVersion,
    required this.isForceUpdate,
    required this.downloadUrl,
    required this.releaseNotes,
  });
}
```

---

<Callout type="success">
ç§»åŠ¨ç«¯å¼€å‘æŠ€æœ¯ä¸ºå‰ç«¯å¼€å‘è€…æä¾›äº†è¿›å…¥ç§»åŠ¨åº”ç”¨é¢†åŸŸçš„æœºä¼šï¼Œé€šè¿‡è·¨å¹³å°æ¡†æ¶å¯ä»¥é«˜æ•ˆåœ°å¼€å‘å‡ºä¼˜è´¨çš„ç§»åŠ¨åº”ç”¨ã€‚
</Callout>

---

## ğŸ“š å‚è€ƒå­¦ä¹ èµ„æ–™

### ğŸ“– å®˜æ–¹æ–‡æ¡£
- [React Native å®˜æ–¹æ–‡æ¡£](https://reactnative.dev/) - React Nativeæƒå¨å­¦ä¹ èµ„æº
- [Flutter å®˜æ–¹æ–‡æ¡£](https://flutter.dev/) - Flutterå¼€å‘æŒ‡å—
- [Expo æ–‡æ¡£](https://docs.expo.dev/) - Expoå¼€å‘å¹³å°
- [Ionic æ–‡æ¡£](https://ionicframework.com/docs) - Ionicè·¨å¹³å°æ¡†æ¶

### ğŸ“ ä¼˜è´¨æ•™ç¨‹
- [React Native å®˜æ–¹æ•™ç¨‹](https://reactnative.dev/docs/tutorial) - å®˜æ–¹å…¥é—¨æ•™ç¨‹
- [Flutter Codelabs](https://codelabs.developers.google.com/codelabs/flutter) - Googleå®˜æ–¹å®éªŒå®¤
- [Mobile Development Courses](https://www.udacity.com/course/react-native--ud905) - ç§»åŠ¨å¼€å‘è¯¾ç¨‹

### ğŸ› ï¸ å®è·µé¡¹ç›®
- [React Native Examples](https://github.com/ReactNativeNews/React-Native-Apps) - React Nativeåº”ç”¨ç¤ºä¾‹
- [Flutter Samples](https://github.com/flutter/samples) - Flutterå®˜æ–¹ç¤ºä¾‹
- [Awesome React Native](https://github.com/jondot/awesome-react-native) - React Nativeèµ„æºé›†åˆ

### ğŸ”§ å¼€å‘å·¥å…·
- [React Native CLI](https://reactnative.dev/docs/environment-setup) - React Nativeå‘½ä»¤è¡Œå·¥å…·
- [Flutter SDK](https://flutter.dev/docs/get-started/install) - Flutterå¼€å‘å·¥å…·åŒ…
- [Android Studio](https://developer.android.com/studio) - Androidå¼€å‘IDE
- [Xcode](https://developer.apple.com/xcode/) - iOSå¼€å‘IDE

### ğŸ“ æ·±å…¥é˜…è¯»
- [React Native Performance](https://reactnative.dev/docs/performance) - React Nativeæ€§èƒ½ä¼˜åŒ–
- [Flutter Performance](https://flutter.dev/docs/perf) - Flutteræ€§èƒ½æœ€ä½³å®è·µ
- [Mobile App Architecture](https://developer.android.com/jetpack/guide) - ç§»åŠ¨åº”ç”¨æ¶æ„æŒ‡å—

<Callout type="tip">
ğŸ’¡ **å­¦ä¹ å»ºè®®**ï¼šå»ºè®®ä»React Nativeæˆ–Flutterä¸­é€‰æ‹©ä¸€ä¸ªå¼€å§‹å­¦ä¹ ï¼ŒæŒæ¡åŸºç¡€å¼€å‘åå†å­¦ä¹ åŸç”Ÿæ¨¡å—å¼€å‘ï¼Œæœ€åäº†è§£åº”ç”¨å‘å¸ƒå’Œæ€§èƒ½ä¼˜åŒ–ã€‚
</Callout>
