import { Callout } from 'nextra/components'

# 16. æ€§èƒ½ä¼˜åŒ–å’Œç›‘æ§

## ğŸ“‹ ç›®å½•

- [æ€§èƒ½æŒ‡æ ‡å’ŒCore Web Vitals](#æ€§èƒ½æŒ‡æ ‡å’Œcore-web-vitals)
- [åŠ è½½æ€§èƒ½ä¼˜åŒ–](#åŠ è½½æ€§èƒ½ä¼˜åŒ–)
- [è¿è¡Œæ—¶æ€§èƒ½ä¼˜åŒ–](#è¿è¡Œæ—¶æ€§èƒ½ä¼˜åŒ–)
- [æ€§èƒ½ç›‘æ§å’Œåˆ†æ](#æ€§èƒ½ç›‘æ§å’Œåˆ†æ)
- [è‡ªåŠ¨åŒ–æ€§èƒ½æµ‹è¯•](#è‡ªåŠ¨åŒ–æ€§èƒ½æµ‹è¯•)
- [æ€§èƒ½é¢„ç®—å’ŒæŒç»­ä¼˜åŒ–](#æ€§èƒ½é¢„ç®—å’ŒæŒç»­ä¼˜åŒ–)

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡å’ŒCore Web Vitals

<Callout type="info">
Core Web Vitalsæ˜¯Googleæå‡ºçš„ç”¨æˆ·ä½“éªŒæ ¸å¿ƒæŒ‡æ ‡ï¼Œç›´æ¥å½±å“SEOæ’åå’Œç”¨æˆ·æ»¡æ„åº¦ã€‚
</Callout>

### Core Web Vitalsè¯¦è§£

```javascript
// 1. Core Web Vitalsç›‘æ§
class WebVitalsMonitor {
  constructor() {
    this.metrics = {
      LCP: null, // Largest Contentful Paint
      FID: null, // First Input Delay
      CLS: null, // Cumulative Layout Shift
      FCP: null, // First Contentful Paint
      TTFB: null // Time to First Byte
    };
    
    this.thresholds = {
      LCP: { good: 2500, poor: 4000 },
      FID: { good: 100, poor: 300 },
      CLS: { good: 0.1, poor: 0.25 },
      FCP: { good: 1800, poor: 3000 },
      TTFB: { good: 800, poor: 1800 }
    };
    
    this.initializeMonitoring();
  }
  
  initializeMonitoring() {
    // ä½¿ç”¨web-vitalsåº“ç›‘æ§
    import('web-vitals').then(({ onLCP, onFID, onCLS, onFCP, onTTFB }) => {
      onLCP(this.handleMetric.bind(this, 'LCP'));
      onFID(this.handleMetric.bind(this, 'FID'));
      onCLS(this.handleMetric.bind(this, 'CLS'));
      onFCP(this.handleMetric.bind(this, 'FCP'));
      onTTFB(this.handleMetric.bind(this, 'TTFB'));
    });
    
    // è‡ªå®šä¹‰æ€§èƒ½ç›‘æ§
    this.monitorCustomMetrics();
  }
  
  handleMetric(name, metric) {
    this.metrics[name] = metric.value;
    
    const threshold = this.thresholds[name];
    const rating = this.getRating(metric.value, threshold);
    
    console.log(`${name}: ${metric.value}ms (${rating})`);
    
    // å‘é€åˆ°åˆ†ææœåŠ¡
    this.sendToAnalytics({
      name,
      value: metric.value,
      rating,
      id: metric.id,
      delta: metric.delta
    });
  }
  
  getRating(value, threshold) {
    if (value <= threshold.good) return 'good';
    if (value <= threshold.poor) return 'needs-improvement';
    return 'poor';
  }
  
  monitorCustomMetrics() {
    // ç›‘æ§èµ„æºåŠ è½½æ—¶é—´
    this.monitorResourceTiming();
    
    // ç›‘æ§é•¿ä»»åŠ¡
    this.monitorLongTasks();
    
    // ç›‘æ§å†…å­˜ä½¿ç”¨
    this.monitorMemoryUsage();
    
    // ç›‘æ§ç”¨æˆ·äº¤äº’
    this.monitorUserInteractions();
  }
  
  monitorResourceTiming() {
    const observer = new PerformanceObserver((list) => {
      list.getEntries().forEach((entry) => {
        if (entry.duration > 1000) { // è¶…è¿‡1ç§’çš„èµ„æº
          console.warn('æ…¢èµ„æº:', {
            name: entry.name,
            duration: entry.duration,
            size: entry.transferSize
          });
          
          this.sendToAnalytics({
            type: 'slow-resource',
            name: entry.name,
            duration: entry.duration,
            size: entry.transferSize
          });
        }
      });
    });
    
    observer.observe({ entryTypes: ['resource'] });
  }
  
  monitorLongTasks() {
    if ('PerformanceObserver' in window) {
      const observer = new PerformanceObserver((list) => {
        list.getEntries().forEach((entry) => {
          console.warn('é•¿ä»»åŠ¡æ£€æµ‹:', {
            duration: entry.duration,
            startTime: entry.startTime
          });
          
          this.sendToAnalytics({
            type: 'long-task',
            duration: entry.duration,
            startTime: entry.startTime
          });
        });
      });
      
      observer.observe({ entryTypes: ['longtask'] });
    }
  }
  
  monitorMemoryUsage() {
    if ('memory' in performance) {
      setInterval(() => {
        const memory = performance.memory;
        const usage = {
          used: memory.usedJSHeapSize,
          total: memory.totalJSHeapSize,
          limit: memory.jsHeapSizeLimit
        };
        
        // å†…å­˜ä½¿ç”¨ç‡è¶…è¿‡80%æ—¶è­¦å‘Š
        if (usage.used / usage.limit > 0.8) {
          console.warn('å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜:', usage);
          
          this.sendToAnalytics({
            type: 'high-memory-usage',
            ...usage
          });
        }
      }, 30000); // æ¯30ç§’æ£€æŸ¥ä¸€æ¬¡
    }
  }
  
  monitorUserInteractions() {
    let interactionCount = 0;
    
    ['click', 'keydown', 'scroll'].forEach(eventType => {
      document.addEventListener(eventType, () => {
        interactionCount++;
      }, { passive: true });
    });
    
    // æ¯åˆ†é’ŸæŠ¥å‘Šäº¤äº’æ¬¡æ•°
    setInterval(() => {
      if (interactionCount > 0) {
        this.sendToAnalytics({
          type: 'user-interactions',
          count: interactionCount
        });
        interactionCount = 0;
      }
    }, 60000);
  }
  
  sendToAnalytics(data) {
    // å‘é€åˆ°Google Analytics
    if (typeof gtag !== 'undefined') {
      gtag('event', 'web_vitals', {
        event_category: 'Performance',
        event_label: data.name || data.type,
        value: Math.round(data.value || data.duration || 0)
      });
    }
    
    // å‘é€åˆ°è‡ªå®šä¹‰åˆ†ææœåŠ¡
    fetch('/api/analytics/performance', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        ...data,
        timestamp: Date.now(),
        url: window.location.href,
        userAgent: navigator.userAgent
      })
    }).catch(console.error);
  }
  
  // ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š
  generateReport() {
    return {
      metrics: this.metrics,
      timestamp: Date.now(),
      url: window.location.href,
      connection: this.getConnectionInfo(),
      device: this.getDeviceInfo()
    };
  }
  
  getConnectionInfo() {
    if ('connection' in navigator) {
      const conn = navigator.connection;
      return {
        effectiveType: conn.effectiveType,
        downlink: conn.downlink,
        rtt: conn.rtt,
        saveData: conn.saveData
      };
    }
    return null;
  }
  
  getDeviceInfo() {
    return {
      deviceMemory: navigator.deviceMemory || 'unknown',
      hardwareConcurrency: navigator.hardwareConcurrency || 'unknown',
      platform: navigator.platform,
      userAgent: navigator.userAgent
    };
  }
}

// 2. æ€§èƒ½é¢„ç®—ç®¡ç†
class PerformanceBudget {
  constructor() {
    this.budgets = {
      // èµ„æºå¤§å°é¢„ç®— (KB)
      javascript: 200,
      css: 100,
      images: 500,
      fonts: 100,
      total: 1000,
      
      // æ€§èƒ½æŒ‡æ ‡é¢„ç®— (ms)
      LCP: 2500,
      FID: 100,
      CLS: 0.1,
      
      // ç½‘ç»œè¯·æ±‚é¢„ç®—
      requests: 50
    };
    
    this.violations = [];
  }
  
  checkBudgets() {
    this.checkResourceBudgets();
    this.checkMetricBudgets();
    this.checkRequestBudgets();
    
    return this.violations;
  }
  
  checkResourceBudgets() {
    const resources = performance.getEntriesByType('resource');
    const sizes = {
      javascript: 0,
      css: 0,
      images: 0,
      fonts: 0,
      total: 0
    };
    
    resources.forEach(resource => {
      const size = resource.transferSize || 0;
      sizes.total += size;
      
      if (resource.name.includes('.js')) {
        sizes.javascript += size;
      } else if (resource.name.includes('.css')) {
        sizes.css += size;
      } else if (/\.(jpg|jpeg|png|gif|webp|svg)/.test(resource.name)) {
        sizes.images += size;
      } else if (/\.(woff|woff2|ttf|otf)/.test(resource.name)) {
        sizes.fonts += size;
      }
    });
    
    // æ£€æŸ¥é¢„ç®—è¿è§„
    Object.entries(sizes).forEach(([type, size]) => {
      const budget = this.budgets[type] * 1024; // è½¬æ¢ä¸ºå­—èŠ‚
      if (size > budget) {
        this.violations.push({
          type: 'resource-budget',
          category: type,
          actual: Math.round(size / 1024),
          budget: this.budgets[type],
          excess: Math.round((size - budget) / 1024)
        });
      }
    });
  }
  
  checkMetricBudgets() {
    const webVitalsMonitor = new WebVitalsMonitor();
    const metrics = webVitalsMonitor.metrics;
    
    Object.entries(metrics).forEach(([metric, value]) => {
      if (value && this.budgets[metric] && value > this.budgets[metric]) {
        this.violations.push({
          type: 'metric-budget',
          metric,
          actual: value,
          budget: this.budgets[metric],
          excess: value - this.budgets[metric]
        });
      }
    });
  }
  
  checkRequestBudgets() {
    const resources = performance.getEntriesByType('resource');
    const requestCount = resources.length;
    
    if (requestCount > this.budgets.requests) {
      this.violations.push({
        type: 'request-budget',
        actual: requestCount,
        budget: this.budgets.requests,
        excess: requestCount - this.budgets.requests
      });
    }
  }
  
  generateBudgetReport() {
    const violations = this.checkBudgets();
    
    return {
      passed: violations.length === 0,
      violations,
      summary: {
        totalViolations: violations.length,
        resourceViolations: violations.filter(v => v.type === 'resource-budget').length,
        metricViolations: violations.filter(v => v.type === 'metric-budget').length,
        requestViolations: violations.filter(v => v.type === 'request-budget').length
      }
    };
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const webVitalsMonitor = new WebVitalsMonitor();
const performanceBudget = new PerformanceBudget();

// é¡µé¢åŠ è½½å®Œæˆåæ£€æŸ¥é¢„ç®—
window.addEventListener('load', () => {
  setTimeout(() => {
    const budgetReport = performanceBudget.generateBudgetReport();
    console.log('æ€§èƒ½é¢„ç®—æŠ¥å‘Š:', budgetReport);
    
    if (!budgetReport.passed) {
      console.warn('æ€§èƒ½é¢„ç®—è¿è§„:', budgetReport.violations);
    }
  }, 5000); // ç­‰å¾…5ç§’ç¡®ä¿æ‰€æœ‰èµ„æºåŠ è½½å®Œæˆ
});
```

## ğŸš€ åŠ è½½æ€§èƒ½ä¼˜åŒ–

### èµ„æºä¼˜åŒ–ç­–ç•¥

```javascript
// 1. å›¾ç‰‡ä¼˜åŒ–ç®¡ç†å™¨
class ImageOptimizer {
  constructor() {
    this.lazyImages = new Set();
    this.imageCache = new Map();
    this.setupLazyLoading();
    this.setupImageFormats();
  }
  
  setupLazyLoading() {
    // Intersection Observeræ‡’åŠ è½½
    this.observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          this.loadImage(entry.target);
          this.observer.unobserve(entry.target);
        }
      });
    }, {
      rootMargin: '50px 0px',
      threshold: 0.01
    });
    
    // ç›‘å¬æ‰€æœ‰æ‡’åŠ è½½å›¾ç‰‡
    document.querySelectorAll('img[data-src]').forEach(img => {
      this.observer.observe(img);
    });
  }
  
  async loadImage(img) {
    const src = img.dataset.src;
    if (!src) return;
    
    try {
      // æ˜¾ç¤ºåŠ è½½å ä½ç¬¦
      img.style.filter = 'blur(5px)';
      
      // é¢„åŠ è½½å›¾ç‰‡
      const image = new Image();
      image.onload = () => {
        img.src = src;
        img.style.filter = 'none';
        img.classList.add('loaded');
      };
      
      image.onerror = () => {
        img.src = '/images/placeholder.jpg'; // é”™è¯¯å ä½å›¾
        img.classList.add('error');
      };
      
      // é€‰æ‹©æœ€ä½³æ ¼å¼
      const optimizedSrc = await this.getOptimizedImageSrc(src);
      image.src = optimizedSrc;
      
    } catch (error) {
      console.error('å›¾ç‰‡åŠ è½½å¤±è´¥:', error);
      img.src = '/images/placeholder.jpg';
    }
  }
  
  async getOptimizedImageSrc(originalSrc) {
    // æ£€æŸ¥æµè§ˆå™¨æ”¯æŒçš„å›¾ç‰‡æ ¼å¼
    const supportedFormats = await this.getSupportedFormats();
    
    // æ ¹æ®è®¾å¤‡åƒç´ æ¯”é€‰æ‹©åˆé€‚å°ºå¯¸
    const devicePixelRatio = window.devicePixelRatio || 1;
    const width = Math.round(300 * devicePixelRatio); // å‡è®¾åŸºç¡€å®½åº¦300px
    
    // æ„å»ºä¼˜åŒ–åçš„å›¾ç‰‡URL
    let optimizedSrc = originalSrc;
    
    if (supportedFormats.webp) {
      optimizedSrc = originalSrc.replace(/\.(jpg|jpeg|png)$/, '.webp');
    } else if (supportedFormats.avif) {
      optimizedSrc = originalSrc.replace(/\.(jpg|jpeg|png)$/, '.avif');
    }
    
    // æ·»åŠ å°ºå¯¸å‚æ•°ï¼ˆå¦‚æœæ”¯æŒï¼‰
    if (optimizedSrc.includes('cloudinary') || optimizedSrc.includes('imagekit')) {
      optimizedSrc += `?w=${width}&q=auto&f=auto`;
    }
    
    return optimizedSrc;
  }
  
  async getSupportedFormats() {
    if (this.supportedFormats) {
      return this.supportedFormats;
    }
    
    const formats = {
      webp: false,
      avif: false,
      jpeg2000: false
    };
    
    // æ£€æµ‹WebPæ”¯æŒ
    formats.webp = await this.canUseFormat('data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA');
    
    // æ£€æµ‹AVIFæ”¯æŒ
    formats.avif = await this.canUseFormat('data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgABogQEAwgMg8f8D///8WfhwB8+ErK42A=');
    
    this.supportedFormats = formats;
    return formats;
  }
  
  canUseFormat(dataUri) {
    return new Promise((resolve) => {
      const img = new Image();
      img.onload = () => resolve(true);
      img.onerror = () => resolve(false);
      img.src = dataUri;
    });
  }
  
  // é¢„åŠ è½½å…³é”®å›¾ç‰‡
  preloadCriticalImages(imageUrls) {
    imageUrls.forEach(url => {
      const link = document.createElement('link');
      link.rel = 'preload';
      link.as = 'image';
      link.href = url;
      document.head.appendChild(link);
    });
  }
  
  // å›¾ç‰‡å‹ç¼©ï¼ˆå®¢æˆ·ç«¯ï¼‰
  async compressImage(file, quality = 0.8, maxWidth = 1920) {
    return new Promise((resolve) => {
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      const img = new Image();
      
      img.onload = () => {
        // è®¡ç®—æ–°å°ºå¯¸
        let { width, height } = img;
        if (width > maxWidth) {
          height = (height * maxWidth) / width;
          width = maxWidth;
        }
        
        canvas.width = width;
        canvas.height = height;
        
        // ç»˜åˆ¶å¹¶å‹ç¼©
        ctx.drawImage(img, 0, 0, width, height);
        canvas.toBlob(resolve, 'image/jpeg', quality);
      };
      
      img.src = URL.createObjectURL(file);
    });
  }
}

// 2. ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
class CodeSplittingManager {
  constructor() {
    this.loadedModules = new Set();
    this.loadingPromises = new Map();
  }
  
  // åŠ¨æ€å¯¼å…¥æ¨¡å—
  async loadModule(modulePath) {
    if (this.loadedModules.has(modulePath)) {
      return;
    }
    
    if (this.loadingPromises.has(modulePath)) {
      return this.loadingPromises.get(modulePath);
    }
    
    const loadPromise = import(modulePath)
      .then(module => {
        this.loadedModules.add(modulePath);
        this.loadingPromises.delete(modulePath);
        return module;
      })
      .catch(error => {
        this.loadingPromises.delete(modulePath);
        console.error(`åŠ è½½æ¨¡å—å¤±è´¥: ${modulePath}`, error);
        throw error;
      });
    
    this.loadingPromises.set(modulePath, loadPromise);
    return loadPromise;
  }
  
  // é¢„åŠ è½½æ¨¡å—
  preloadModule(modulePath) {
    const link = document.createElement('link');
    link.rel = 'modulepreload';
    link.href = modulePath;
    document.head.appendChild(link);
  }
  
  // åŸºäºè·¯ç”±çš„ä»£ç åˆ†å‰²
  setupRouteBasedSplitting() {
    const routes = {
      '/dashboard': () => import('./pages/Dashboard'),
      '/profile': () => import('./pages/Profile'),
      '/settings': () => import('./pages/Settings')
    };
    
    // é¢„åŠ è½½å¯èƒ½è®¿é—®çš„è·¯ç”±
    const currentPath = window.location.pathname;
    const likelyNextRoutes = this.predictNextRoutes(currentPath);
    
    likelyNextRoutes.forEach(route => {
      if (routes[route]) {
        setTimeout(() => {
          routes[route]().catch(console.error);
        }, 2000); // 2ç§’åé¢„åŠ è½½
      }
    });
  }
  
  predictNextRoutes(currentPath) {
    // åŸºäºç”¨æˆ·è¡Œä¸ºé¢„æµ‹ä¸‹ä¸€ä¸ªå¯èƒ½è®¿é—®çš„è·¯ç”±
    const predictions = {
      '/': ['/dashboard', '/profile'],
      '/dashboard': ['/profile', '/settings'],
      '/profile': ['/settings', '/dashboard']
    };
    
    return predictions[currentPath] || [];
  }
  
  // ç»„ä»¶çº§æ‡’åŠ è½½
  createLazyComponent(importFn) {
    return React.lazy(() => {
      return importFn().catch(error => {
        console.error('ç»„ä»¶åŠ è½½å¤±è´¥:', error);
        // è¿”å›é”™è¯¯ç»„ä»¶
        return { default: () => React.createElement('div', null, 'ç»„ä»¶åŠ è½½å¤±è´¥') };
      });
    });
  }
}

// 3. ç¼“å­˜ç­–ç•¥ä¼˜åŒ–
class CacheOptimizer {
  constructor() {
    this.setupServiceWorker();
    this.setupHTTPCache();
  }
  
  async setupServiceWorker() {
    if ('serviceWorker' in navigator) {
      try {
        const registration = await navigator.serviceWorker.register('/sw.js');
        console.log('Service Workeræ³¨å†ŒæˆåŠŸ:', registration);
        
        // ç›‘å¬æ›´æ–°
        registration.addEventListener('updatefound', () => {
          const newWorker = registration.installing;
          newWorker.addEventListener('statechange', () => {
            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
              // æœ‰æ–°ç‰ˆæœ¬å¯ç”¨
              this.notifyUpdate();
            }
          });
        });
      } catch (error) {
        console.error('Service Workeræ³¨å†Œå¤±è´¥:', error);
      }
    }
  }
  
  setupHTTPCache() {
    // è®¾ç½®èµ„æºç¼“å­˜ç­–ç•¥
    const cacheStrategies = {
      // é™æ€èµ„æºï¼šé•¿æœŸç¼“å­˜
      static: {
        pattern: /\.(js|css|png|jpg|jpeg|gif|svg|woff|woff2)$/,
        strategy: 'cache-first',
        maxAge: 31536000 // 1å¹´
      },
      
      // APIæ•°æ®ï¼šç½‘ç»œä¼˜å…ˆ
      api: {
        pattern: /\/api\//,
        strategy: 'network-first',
        maxAge: 300 // 5åˆ†é’Ÿ
      },
      
      // HTMLé¡µé¢ï¼šç½‘ç»œä¼˜å…ˆï¼Œç¦»çº¿å›é€€
      pages: {
        pattern: /\.html$/,
        strategy: 'network-first',
        maxAge: 3600 // 1å°æ—¶
      }
    };
    
    // åœ¨Service Workerä¸­å®ç°è¿™äº›ç­–ç•¥
    this.sendMessageToSW('SET_CACHE_STRATEGIES', cacheStrategies);
  }
  
  sendMessageToSW(type, data) {
    if (navigator.serviceWorker.controller) {
      navigator.serviceWorker.controller.postMessage({ type, data });
    }
  }
  
  notifyUpdate() {
    // é€šçŸ¥ç”¨æˆ·æœ‰æ–°ç‰ˆæœ¬
    if (confirm('å‘ç°æ–°ç‰ˆæœ¬ï¼Œæ˜¯å¦ç«‹å³æ›´æ–°ï¼Ÿ')) {
      window.location.reload();
    }
  }
  
  // é¢„ç¼“å­˜å…³é”®èµ„æº
  precacheResources(urls) {
    this.sendMessageToSW('PRECACHE_RESOURCES', urls);
  }
  
  // æ¸…ç†è¿‡æœŸç¼“å­˜
  cleanupCache() {
    this.sendMessageToSW('CLEANUP_CACHE');
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const imageOptimizer = new ImageOptimizer();
const codeSplittingManager = new CodeSplittingManager();
const cacheOptimizer = new CacheOptimizer();

// åˆå§‹åŒ–ä¼˜åŒ–
document.addEventListener('DOMContentLoaded', () => {
  // é¢„åŠ è½½å…³é”®å›¾ç‰‡
  imageOptimizer.preloadCriticalImages([
    '/images/hero.jpg',
    '/images/logo.png'
  ]);
  
  // è®¾ç½®è·¯ç”±åˆ†å‰²
  codeSplittingManager.setupRouteBasedSplitting();
  
  // é¢„ç¼“å­˜å…³é”®èµ„æº
  cacheOptimizer.precacheResources([
    '/',
    '/dashboard',
    '/offline.html'
  ]);
});
```

---

<Callout type="success">
æ€§èƒ½ä¼˜åŒ–æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œéœ€è¦ç»“åˆç›‘æ§æ•°æ®ã€ç”¨æˆ·åé¦ˆå’Œä¸šåŠ¡éœ€æ±‚æ¥åˆ¶å®šåˆé€‚çš„ä¼˜åŒ–ç­–ç•¥ã€‚
</Callout>
