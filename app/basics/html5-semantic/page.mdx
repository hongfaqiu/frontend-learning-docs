import { Callout } from 'nextra/components'

# 02. HTML5深入和语义化

## 📋 目录

- [HTML5新特性概览](#html5新特性概览)
- [语义化标签深入](#语义化标签深入)
- [表单增强和验证](#表单增强和验证)
- [多媒体和图形](#多媒体和图形)
- [Web Components技术](#web-components技术)
- [无障碍性最佳实践](#无障碍性最佳实践)

## 🆕 HTML5新特性概览

<Callout type="info">
HTML5不仅仅是标记语言的升级，它代表了Web平台的重大进步，引入了语义化、多媒体、图形、存储等众多新特性。
</Callout>

### HTML5的设计原则

1. **向后兼容**: 不破坏现有内容
2. **实用性优先**: 解决实际问题
3. **渐进增强**: 支持新特性的同时保持基本功能
4. **语义化**: 让内容更有意义
5. **无障碍性**: 让所有人都能访问

### 核心新特性

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML5新特性示例</title>
</head>
<body>
    <!-- 语义化结构 -->
    <header>
        <nav>
            <ul>
                <li><a href="#home">首页</a></li>
                <li><a href="#about">关于</a></li>
            </ul>
        </nav>
    </header>
    
    <main>
        <article>
            <header>
                <h1>文章标题</h1>
                <time datetime="2024-01-15">2024年1月15日</time>
            </header>
            
            <section>
                <h2>章节标题</h2>
                <p>文章内容...</p>
                
                <!-- 多媒体元素 -->
                <figure>
                    <video controls width="400">
                        <source src="video.mp4" type="video/mp4">
                        <source src="video.webm" type="video/webm">
                        您的浏览器不支持视频播放。
                    </video>
                    <figcaption>视频说明</figcaption>
                </figure>
            </section>
        </article>
        
        <aside>
            <h2>相关链接</h2>
            <nav>
                <ul>
                    <li><a href="#related1">相关文章1</a></li>
                    <li><a href="#related2">相关文章2</a></li>
                </ul>
            </nav>
        </aside>
    </main>
    
    <footer>
        <p>&copy; 2024 我的网站</p>
    </footer>
</body>
</html>
```

## 🏗️ 语义化标签深入

### 文档结构标签

<Callout type="warning">
正确使用语义化标签不仅有助于SEO，更重要的是提升了内容的可访问性和可维护性。
</Callout>

#### 主要结构标签

```html
<!-- 页面结构示例 -->
<body>
    <!-- 页面头部 -->
    <header role="banner">
        <h1>网站标题</h1>
        <nav role="navigation" aria-label="主导航">
            <ul>
                <li><a href="/" aria-current="page">首页</a></li>
                <li><a href="/about">关于我们</a></li>
                <li><a href="/contact">联系我们</a></li>
            </ul>
        </nav>
    </header>
    
    <!-- 主要内容区域 -->
    <main role="main">
        <!-- 文章内容 -->
        <article>
            <header>
                <h1>文章标题</h1>
                <div class="meta">
                    <address>
                        作者：<a href="/author/john">John Doe</a>
                    </address>
                    <time datetime="2024-01-15T10:30:00+08:00" pubdate>
                        发布于 2024年1月15日 10:30
                    </time>
                </div>
            </header>
            
            <!-- 文章摘要 -->
            <section class="summary">
                <h2>摘要</h2>
                <p>这是文章的摘要内容...</p>
            </section>
            
            <!-- 文章正文 -->
            <section class="content">
                <h2>正文</h2>
                <p>文章正文内容...</p>
                
                <!-- 引用内容 -->
                <blockquote cite="https://example.com/source">
                    <p>这是一段引用的内容。</p>
                    <footer>
                        —— <cite>引用来源</cite>
                    </footer>
                </blockquote>
                
                <!-- 代码示例 -->
                <figure>
                    <pre><code class="language-javascript">
function greet(name) {
    return `Hello, ${name}!`;
}
                    </code></pre>
                    <figcaption>JavaScript函数示例</figcaption>
                </figure>
            </section>
        </article>
    </main>
    
    <!-- 侧边栏 -->
    <aside role="complementary">
        <section class="widget">
            <h2>最新文章</h2>
            <nav aria-label="最新文章">
                <ul>
                    <li><a href="/article1">文章1</a></li>
                    <li><a href="/article2">文章2</a></li>
                </ul>
            </nav>
        </section>
    </aside>
    
    <!-- 页面底部 -->
    <footer role="contentinfo">
        <nav aria-label="底部导航">
            <ul>
                <li><a href="/privacy">隐私政策</a></li>
                <li><a href="/terms">使用条款</a></li>
            </ul>
        </nav>
        <p>&copy; 2024 我的网站. 保留所有权利。</p>
    </footer>
</body>
```

#### 内容分组标签

```html
<!-- 详细信息和摘要 -->
<details open>
    <summary>点击查看详细信息</summary>
    <p>这里是详细的内容描述...</p>
    <ul>
        <li>详细项目1</li>
        <li>详细项目2</li>
    </ul>
</details>

<!-- 对话内容 -->
<dialog id="confirm-dialog">
    <form method="dialog">
        <p>确定要删除这个项目吗？</p>
        <div>
            <button value="cancel">取消</button>
            <button value="confirm">确定</button>
        </div>
    </form>
</dialog>

<!-- 标记和高亮 -->
<p>
    在这段文本中，<mark>这部分内容被高亮显示</mark>，
    而<small>这部分是小字体的补充说明</small>。
</p>

<!-- 进度指示器 -->
<div class="progress-container">
    <label for="file-progress">文件上传进度：</label>
    <progress id="file-progress" value="70" max="100">70%</progress>
</div>

<div class="meter-container">
    <label for="disk-usage">磁盘使用率：</label>
    <meter id="disk-usage" value="0.6" min="0" max="1">60%</meter>
</div>

<!-- 时间和日期 -->
<p>
    文章发布时间：
    <time datetime="2024-01-15T10:30:00+08:00" title="2024年1月15日上午10点30分">
        今天上午
    </time>
</p>
```

## 📝 表单增强和验证

### HTML5表单新特性

<Callout type="info">
HTML5大大增强了表单功能，提供了更多的输入类型、验证机制和用户体验改进。
</Callout>

```html
<!-- 完整的HTML5表单示例 -->
<form id="registration-form" novalidate>
    <fieldset>
        <legend>基本信息</legend>
        
        <!-- 文本输入 -->
        <div class="form-group">
            <label for="username">用户名 *</label>
            <input type="text" 
                   id="username" 
                   name="username" 
                   required 
                   minlength="3" 
                   maxlength="20"
                   pattern="[a-zA-Z0-9_]+"
                   placeholder="请输入用户名"
                   autocomplete="username"
                   aria-describedby="username-help">
            <small id="username-help">
                用户名只能包含字母、数字和下划线，长度3-20个字符
            </small>
        </div>
        
        <!-- 邮箱输入 -->
        <div class="form-group">
            <label for="email">邮箱地址 *</label>
            <input type="email" 
                   id="email" 
                   name="email" 
                   required 
                   placeholder="example@domain.com"
                   autocomplete="email">
        </div>
        
        <!-- 密码输入 -->
        <div class="form-group">
            <label for="password">密码 *</label>
            <input type="password" 
                   id="password" 
                   name="password" 
                   required 
                   minlength="8"
                   pattern="(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]+"
                   placeholder="请输入密码"
                   autocomplete="new-password">
        </div>
        
        <!-- 数字输入 -->
        <div class="form-group">
            <label for="age">年龄</label>
            <input type="number" 
                   id="age" 
                   name="age" 
                   min="18" 
                   max="100" 
                   step="1"
                   placeholder="请输入年龄">
        </div>
        
        <!-- 范围选择 -->
        <div class="form-group">
            <label for="experience">工作经验（年）</label>
            <input type="range" 
                   id="experience" 
                   name="experience" 
                   min="0" 
                   max="20" 
                   value="5" 
                   step="1">
            <output>5</output> 年
        </div>
        
        <!-- 日期输入 -->
        <div class="form-group">
            <label for="birthdate">出生日期</label>
            <input type="date" 
                   id="birthdate" 
                   name="birthdate" 
                   min="1900-01-01" 
                   max="2006-12-31">
        </div>
        
        <!-- 文件上传 -->
        <div class="form-group">
            <label for="avatar">头像上传</label>
            <input type="file" 
                   id="avatar" 
                   name="avatar" 
                   accept="image/*" 
                   capture="user">
        </div>
        
        <!-- 数据列表 -->
        <div class="form-group">
            <label for="city">城市</label>
            <input type="text" 
                   id="city" 
                   name="city" 
                   list="cities" 
                   placeholder="请输入或选择城市">
            <datalist id="cities">
                <option value="北京">
                <option value="上海">
                <option value="广州">
                <option value="深圳">
                <option value="杭州">
            </datalist>
        </div>
    </fieldset>
    
    <!-- 提交按钮 -->
    <div class="form-actions">
        <button type="submit">注册</button>
        <button type="reset">重置</button>
    </div>
</form>
```

### 表单验证API

```javascript
// 表单验证API详解
class FormValidator {
    constructor(form) {
        this.form = form;
        this.setupValidation();
    }
    
    setupValidation() {
        // 阻止默认的HTML5验证气泡
        this.form.setAttribute('novalidate', '');
        
        // 为每个输入字段添加验证
        const inputs = this.form.querySelectorAll('input, select, textarea');
        inputs.forEach(input => {
            input.addEventListener('blur', () => this.validateField(input));
            input.addEventListener('input', () => this.clearFieldError(input));
        });
        
        // 表单提交验证
        this.form.addEventListener('submit', (e) => this.handleSubmit(e));
    }
    
    validateField(field) {
        const validity = field.validity;
        
        if (validity.valid) {
            this.showFieldSuccess(field);
            return true;
        } else {
            const errorMessage = this.getErrorMessage(field, validity);
            this.showFieldError(field, errorMessage);
            return false;
        }
    }
    
    getErrorMessage(field, validity) {
        const fieldName = field.getAttribute('aria-label') || 
                         field.previousElementSibling?.textContent || 
                         field.name;
        
        if (validity.valueMissing) {
            return `${fieldName}是必填项`;
        }
        
        if (validity.typeMismatch) {
            switch (field.type) {
                case 'email':
                    return '请输入有效的邮箱地址';
                case 'url':
                    return '请输入有效的网址';
                case 'tel':
                    return '请输入有效的电话号码';
                default:
                    return '输入格式不正确';
            }
        }
        
        if (validity.patternMismatch) {
            return field.getAttribute('data-pattern-message') || '输入格式不符合要求';
        }
        
        if (validity.tooShort) {
            return `${fieldName}至少需要${field.minLength}个字符`;
        }
        
        if (validity.tooLong) {
            return `${fieldName}最多允许${field.maxLength}个字符`;
        }
        
        return '输入无效';
    }
    
    showFieldError(field, message) {
        field.classList.add('invalid');
        field.setAttribute('aria-invalid', 'true');
        
        // 显示错误消息的逻辑
        console.error(`${field.name}: ${message}`);
    }
    
    showFieldSuccess(field) {
        field.classList.remove('invalid');
        field.classList.add('valid');
        field.setAttribute('aria-invalid', 'false');
    }
    
    clearFieldError(field) {
        if (field.validity.valid) {
            this.showFieldSuccess(field);
        }
    }
    
    handleSubmit(e) {
        e.preventDefault();
        
        // 验证所有字段
        const inputs = this.form.querySelectorAll('input, select, textarea');
        let isValid = true;
        
        inputs.forEach(input => {
            const fieldValid = this.validateField(input);
            isValid = isValid && fieldValid;
        });
        
        if (isValid) {
            console.log('表单验证通过，准备提交');
            // 处理表单提交
        }
    }
}

// 使用示例
document.addEventListener('DOMContentLoaded', function() {
    const forms = document.querySelectorAll('form[data-validate]');
    forms.forEach(form => {
        new FormValidator(form);
    });
});
```

## 🎬 多媒体和图形

### 音频和视频

```html
<!-- 视频元素 -->
<video controls width="640" height="360" poster="video-poster.jpg">
    <source src="video.mp4" type="video/mp4">
    <source src="video.webm" type="video/webm">
    <source src="video.ogv" type="video/ogg">
    <track kind="subtitles" src="subtitles-zh.vtt" srclang="zh" label="中文字幕">
    <track kind="subtitles" src="subtitles-en.vtt" srclang="en" label="English">
    <p>您的浏览器不支持视频播放。请<a href="video.mp4">下载视频</a>观看。</p>
</video>

<!-- 音频元素 -->
<audio controls>
    <source src="audio.mp3" type="audio/mpeg">
    <source src="audio.ogg" type="audio/ogg">
    <source src="audio.wav" type="audio/wav">
    <p>您的浏览器不支持音频播放。请<a href="audio.mp3">下载音频</a>收听。</p>
</audio>

<!-- 响应式图片 -->
<picture>
    <source media="(min-width: 800px)" srcset="large.jpg">
    <source media="(min-width: 400px)" srcset="medium.jpg">
    <img src="small.jpg" alt="响应式图片示例">
</picture>

<!-- Canvas绘图 -->
<canvas id="myCanvas" width="400" height="300">
    您的浏览器不支持Canvas。
</canvas>

<script>
const canvas = document.getElementById('myCanvas');
const ctx = canvas.getContext('2d');

// 绘制矩形
ctx.fillStyle = '#007bff';
ctx.fillRect(50, 50, 100, 80);

// 绘制圆形
ctx.beginPath();
ctx.arc(250, 90, 40, 0, 2 * Math.PI);
ctx.fillStyle = '#28a745';
ctx.fill();

// 绘制文字
ctx.font = '20px Arial';
ctx.fillStyle = '#333';
ctx.fillText('Hello Canvas!', 50, 200);
</script>

<!-- SVG图形 -->
<svg width="200" height="200" viewBox="0 0 200 200">
    <circle cx="100" cy="100" r="80" fill="#007bff" stroke="#0056b3" stroke-width="2"/>
    <text x="100" y="105" text-anchor="middle" fill="white" font-size="16">SVG</text>
</svg>
```

---

<Callout type="success">
HTML5的语义化标签和表单增强功能大大提升了Web开发的效率和用户体验。正确使用这些特性不仅能改善SEO，还能提升网站的可访问性。
</Callout>
