import { Callout } from 'nextra/components'

# 14. ç§»åŠ¨ç«¯å¼€å‘

## ğŸ“‹ ç›®å½•

- [ç§»åŠ¨ç«¯å¼€å‘æŠ€æœ¯æ ˆ](#ç§»åŠ¨ç«¯å¼€å‘æŠ€æœ¯æ ˆ)
- [React Nativeæ·±å…¥å¼€å‘](#react-nativeæ·±å…¥å¼€å‘)
- [Flutterè·¨å¹³å°å¼€å‘](#flutterè·¨å¹³å°å¼€å‘)
- [åŸç”Ÿæ¨¡å—å’Œæ¡¥æ¥](#åŸç”Ÿæ¨¡å—å’Œæ¡¥æ¥)
- [æ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#æ€§èƒ½ä¼˜åŒ–ç­–ç•¥)
- [å‘å¸ƒå’Œåˆ†å‘](#å‘å¸ƒå’Œåˆ†å‘)

## ç§»åŠ¨ç«¯å¼€å‘æŠ€æœ¯æ ˆ

<Callout type="info">
ç§»åŠ¨ç«¯å¼€å‘æŠ€æœ¯æ—¥æ–°æœˆå¼‚ï¼Œé€‰æ‹©åˆé€‚çš„æŠ€æœ¯æ ˆèƒ½å¤Ÿå¤§å¤§æå‡å¼€å‘æ•ˆç‡å’Œåº”ç”¨æ€§èƒ½ã€‚
</Callout>

### ç§»åŠ¨ç«¯æŠ€æœ¯æ–¹æ¡ˆå¯¹æ¯”

```javascript
// ç§»åŠ¨ç«¯å¼€å‘æŠ€æœ¯å¯¹æ¯”
const mobileTechnologies = {
  // åŸç”Ÿå¼€å‘
  native: {
    ios: {
      è¯­è¨€: 'Swift/Objective-C',
      IDE: 'Xcode',
      ä¼˜åŠ¿: ['æœ€ä½³æ€§èƒ½', 'å®Œæ•´å¹³å°ç‰¹æ€§', 'æœ€æ–°APIæ”¯æŒ'],
      åŠ£åŠ¿: ['å¼€å‘æˆæœ¬é«˜', 'ç»´æŠ¤å¤æ‚', 'æŠ€èƒ½è¦æ±‚é«˜'],
      é€‚ç”¨åœºæ™¯: 'é«˜æ€§èƒ½åº”ç”¨ã€å¹³å°ç‰¹å®šåŠŸèƒ½'
    },
    android: {
      è¯­è¨€: 'Kotlin/Java',
      IDE: 'Android Studio',
      ä¼˜åŠ¿: ['æœ€ä½³æ€§èƒ½', 'å®Œæ•´å¹³å°ç‰¹æ€§', 'çµæ´»å®šåˆ¶'],
      åŠ£åŠ¿: ['ç¢ç‰‡åŒ–ä¸¥é‡', 'å¼€å‘æˆæœ¬é«˜', 'ç»´æŠ¤å¤æ‚'],
      é€‚ç”¨åœºæ™¯: 'é«˜æ€§èƒ½åº”ç”¨ã€æ·±åº¦å®šåˆ¶'
    }
  },
  
  // è·¨å¹³å°æ¡†æ¶
  crossPlatform: {
    reactNative: {
      æŠ€æœ¯æ ˆ: 'React + JavaScript/TypeScript',
      æ¸²æŸ“æ–¹å¼: 'åŸç”Ÿç»„ä»¶',
      ä¼˜åŠ¿: [
        'Reactç”Ÿæ€ä¸°å¯Œ',
        'çƒ­é‡è½½å¼€å‘ä½“éªŒ',
        'ä»£ç å¤ç”¨ç‡é«˜',
        'ç¤¾åŒºæ´»è·ƒ'
      ],
      åŠ£åŠ¿: [
        'æ€§èƒ½ä¸å¦‚åŸç”Ÿ',
        'å¹³å°å·®å¼‚å¤„ç†',
        'ç¬¬ä¸‰æ–¹åº“ä¾èµ–'
      ],
      çŸ¥ååº”ç”¨: ['Facebook', 'Instagram', 'Uber Eats'],
      é€‚ç”¨åœºæ™¯: 'å¿«é€Ÿå¼€å‘ã€å†…å®¹å±•ç¤ºç±»åº”ç”¨'
    },
    
    flutter: {
      æŠ€æœ¯æ ˆ: 'Dart + Flutter',
      æ¸²æŸ“æ–¹å¼: 'è‡ªç»˜å¼•æ“',
      ä¼˜åŠ¿: [
        'é«˜æ€§èƒ½æ¸²æŸ“',
        'ä¸€è‡´çš„UIä½“éªŒ',
        'çƒ­é‡è½½',
        'Googleæ”¯æŒ'
      ],
      åŠ£åŠ¿: [
        'å­¦ä¹ æˆæœ¬é«˜',
        'ç”Ÿæ€ç›¸å¯¹è¾ƒå°',
        'åº”ç”¨ä½“ç§¯å¤§'
      ],
      çŸ¥ååº”ç”¨: ['Google Pay', 'Alibaba', 'BMW'],
      é€‚ç”¨åœºæ™¯: 'å¤æ‚UIã€é«˜æ€§èƒ½è¦æ±‚'
    },
    
    ionic: {
      æŠ€æœ¯æ ˆ: 'WebæŠ€æœ¯ + Cordova/Capacitor',
      æ¸²æŸ“æ–¹å¼: 'WebView',
      ä¼˜åŠ¿: [
        'WebæŠ€æœ¯æ ˆ',
        'å¿«é€Ÿå¼€å‘',
        'æ’ä»¶ä¸°å¯Œ'
      ],
      åŠ£åŠ¿: [
        'æ€§èƒ½è¾ƒå·®',
        'WebViewé™åˆ¶',
        'ç”¨æˆ·ä½“éªŒå·®å¼‚'
      ],
      é€‚ç”¨åœºæ™¯: 'ç®€å•åº”ç”¨ã€å¿«é€ŸåŸå‹'
    }
  }
};

// æŠ€æœ¯é€‰æ‹©å†³ç­–
function chooseMobileTechnology(requirements) {
  const {
    teamSkills,
    performanceRequirements,
    developmentTime,
    budget,
    platformPriority,
    uiComplexity
  } = requirements;
  
  // é«˜æ€§èƒ½è¦æ±‚æˆ–å¹³å°ç‰¹å®šåŠŸèƒ½
  if (performanceRequirements === 'critical' || platformPriority === 'single') {
    return {
      recommendation: 'Native',
      reason: 'æœ€ä½³æ€§èƒ½å’Œå¹³å°é›†æˆ'
    };
  }
  
  // ReactæŠ€æœ¯æ ˆå›¢é˜Ÿ
  if (teamSkills.includes('react') && developmentTime === 'short') {
    return {
      recommendation: 'React Native',
      reason: 'å¿«é€Ÿå¼€å‘ï¼ŒæŠ€èƒ½å¤ç”¨'
    };
  }
  
  // å¤æ‚UIæˆ–é«˜æ€§èƒ½è¦æ±‚
  if (uiComplexity === 'high' || performanceRequirements === 'high') {
    return {
      recommendation: 'Flutter',
      reason: 'ä¼˜ç§€çš„UIæ€§èƒ½å’Œä¸€è‡´æ€§'
    };
  }
  
  // é¢„ç®—æœ‰é™ï¼Œå¿«é€Ÿå¼€å‘
  if (budget === 'limited' && teamSkills.includes('web')) {
    return {
      recommendation: 'Ionic',
      reason: 'ä½æˆæœ¬ï¼Œå¿«é€Ÿä¸Šçº¿'
    };
  }
  
  // é»˜è®¤æ¨è
  return {
    recommendation: 'React Native',
    reason: 'å¹³è¡¡äº†å¼€å‘æ•ˆç‡å’Œæ€§èƒ½'
  };
}
```

## React Nativeæ·±å…¥å¼€å‘

### React Nativeæ¶æ„å’Œç»„ä»¶

```typescript
// 1. æ ¸å¿ƒç»„ä»¶å’ŒAPIä½¿ç”¨
import React, { useState, useEffect, useCallback } from 'react';
import {
  View,
  Text,
  ScrollView,
  FlatList,
  Image,
  TouchableOpacity,
  StyleSheet,
  Dimensions,
  Platform,
  Alert,
  Linking,
  Share
} from 'react-native';
import { SafeAreaProvider, SafeAreaView } from 'react-native-safe-area-context';
import AsyncStorage from '@react-native-async-storage/async-storage';

// è·å–è®¾å¤‡ä¿¡æ¯
const { width: screenWidth, height: screenHeight } = Dimensions.get('window');
const isIOS = Platform.OS === 'ios';
const isAndroid = Platform.OS === 'android';

// ç”¨æˆ·åˆ—è¡¨ç»„ä»¶
interface User {
  id: string;
  name: string;
  email: string;
  avatar: string;
  isOnline: boolean;
}

interface UserListProps {
  users: User[];
  onUserPress: (user: User) => void;
  onRefresh: () => Promise<void>;
}

const UserList: React.FC<UserListProps> = ({ users, onUserPress, onRefresh }) => {
  const [refreshing, setRefreshing] = useState(false);
  
  const handleRefresh = useCallback(async () => {
    setRefreshing(true);
    try {
      await onRefresh();
    } finally {
      setRefreshing(false);
    }
  }, [onRefresh]);
  
  const renderUser = useCallback(({ item }: { item: User }) => (
    <TouchableOpacity
      style={styles.userItem}
      onPress={() => onUserPress(item)}
      activeOpacity={0.7}
    >
      <Image source={{ uri: item.avatar }} style={styles.avatar} />
      <View style={styles.userInfo}>
        <Text style={styles.userName}>{item.name}</Text>
        <Text style={styles.userEmail}>{item.email}</Text>
      </View>
      <View style={[
        styles.onlineIndicator,
        { backgroundColor: item.isOnline ? '#4CAF50' : '#9E9E9E' }
      ]} />
    </TouchableOpacity>
  ), [onUserPress]);
  
  const keyExtractor = useCallback((item: User) => item.id, []);
  
  return (
    <FlatList
      data={users}
      renderItem={renderUser}
      keyExtractor={keyExtractor}
      refreshing={refreshing}
      onRefresh={handleRefresh}
      showsVerticalScrollIndicator={false}
      contentContainerStyle={styles.listContainer}
      ItemSeparatorComponent={() => <View style={styles.separator} />}
      ListEmptyComponent={() => (
        <View style={styles.emptyContainer}>
          <Text style={styles.emptyText}>æš‚æ— ç”¨æˆ·æ•°æ®</Text>
        </View>
      )}
    />
  );
};

// ä¸»åº”ç”¨ç»„ä»¶
const App: React.FC = () => {
  const [users, setUsers] = useState<User[]>([]);
  const [loading, setLoading] = useState(true);
  
  useEffect(() => {
    loadUsers();
  }, []);
  
  const loadUsers = async () => {
    try {
      setLoading(true);
      
      // ä»æœ¬åœ°å­˜å‚¨åŠ è½½ç¼“å­˜æ•°æ®
      const cachedUsers = await AsyncStorage.getItem('users');
      if (cachedUsers) {
        setUsers(JSON.parse(cachedUsers));
      }
      
      // ä»APIè·å–æœ€æ–°æ•°æ®
      const response = await fetch('https://api.example.com/users');
      const freshUsers = await response.json();
      
      setUsers(freshUsers);
      
      // ç¼“å­˜åˆ°æœ¬åœ°å­˜å‚¨
      await AsyncStorage.setItem('users', JSON.stringify(freshUsers));
    } catch (error) {
      console.error('åŠ è½½ç”¨æˆ·å¤±è´¥:', error);
      Alert.alert('é”™è¯¯', 'åŠ è½½ç”¨æˆ·æ•°æ®å¤±è´¥');
    } finally {
      setLoading(false);
    }
  };
  
  const handleUserPress = useCallback((user: User) => {
    Alert.alert(
      user.name,
      `é‚®ç®±: ${user.email}`,
      [
        { text: 'å–æ¶ˆ', style: 'cancel' },
        {
          text: 'å‘é€é‚®ä»¶',
          onPress: () => {
            Linking.openURL(`mailto:${user.email}`);
          }
        },
        {
          text: 'åˆ†äº«',
          onPress: () => {
            Share.share({
              message: `æ¨èç”¨æˆ·: ${user.name} (${user.email})`,
              title: 'ç”¨æˆ·åˆ†äº«'
            });
          }
        }
      ]
    );
  }, []);
  
  const handleRefresh = useCallback(async () => {
    await loadUsers();
  }, []);
  
  if (loading) {
    return (
      <SafeAreaView style={styles.container}>
        <View style={styles.loadingContainer}>
          <Text>åŠ è½½ä¸­...</Text>
        </View>
      </SafeAreaView>
    );
  }
  
  return (
    <SafeAreaProvider>
      <SafeAreaView style={styles.container}>
        <View style={styles.header}>
          <Text style={styles.headerTitle}>ç”¨æˆ·åˆ—è¡¨</Text>
        </View>
        
        <UserList
          users={users}
          onUserPress={handleUserPress}
          onRefresh={handleRefresh}
        />
      </SafeAreaView>
    </SafeAreaProvider>
  );
};

// æ ·å¼å®šä¹‰
const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#f5f5f5'
  },
  header: {
    backgroundColor: '#2196F3',
    paddingVertical: 16,
    paddingHorizontal: 20,
    ...Platform.select({
      ios: {
        shadowColor: '#000',
        shadowOffset: { width: 0, height: 2 },
        shadowOpacity: 0.1,
        shadowRadius: 4
      },
      android: {
        elevation: 4
      }
    })
  },
  headerTitle: {
    fontSize: 20,
    fontWeight: 'bold',
    color: '#fff',
    textAlign: 'center'
  },
  loadingContainer: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center'
  },
  listContainer: {
    padding: 16
  },
  userItem: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: '#fff',
    padding: 16,
    borderRadius: 8,
    ...Platform.select({
      ios: {
        shadowColor: '#000',
        shadowOffset: { width: 0, height: 1 },
        shadowOpacity: 0.1,
        shadowRadius: 2
      },
      android: {
        elevation: 2
      }
    })
  },
  avatar: {
    width: 50,
    height: 50,
    borderRadius: 25,
    marginRight: 12
  },
  userInfo: {
    flex: 1
  },
  userName: {
    fontSize: 16,
    fontWeight: '600',
    color: '#333',
    marginBottom: 4
  },
  userEmail: {
    fontSize: 14,
    color: '#666'
  },
  onlineIndicator: {
    width: 12,
    height: 12,
    borderRadius: 6
  },
  separator: {
    height: 12
  },
  emptyContainer: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    paddingVertical: 50
  },
  emptyText: {
    fontSize: 16,
    color: '#999'
  }
});

export default App;
```

### å¯¼èˆªå’ŒçŠ¶æ€ç®¡ç†

```typescript
// 1. React Navigationè®¾ç½®
import React from 'react';
import { NavigationContainer } from '@react-navigation/native';
import { createNativeStackNavigator } from '@react-navigation/native-stack';
import { createBottomTabNavigator } from '@react-navigation/bottom-tabs';
import { createDrawerNavigator } from '@react-navigation/drawer';
import Icon from 'react-native-vector-icons/MaterialIcons';

// ç±»å‹å®šä¹‰
export type RootStackParamList = {
  Main: undefined;
  UserDetail: { userId: string };
  Settings: undefined;
};

export type TabParamList = {
  Home: undefined;
  Users: undefined;
  Profile: undefined;
};

const Stack = createNativeStackNavigator<RootStackParamList>();
const Tab = createBottomTabNavigator<TabParamList>();
const Drawer = createDrawerNavigator();

// æ ‡ç­¾é¡µå¯¼èˆª
function TabNavigator() {
  return (
    <Tab.Navigator
      screenOptions={({ route }) => ({
        tabBarIcon: ({ focused, color, size }) => {
          let iconName: string;
          
          switch (route.name) {
            case 'Home':
              iconName = 'home';
              break;
            case 'Users':
              iconName = 'people';
              break;
            case 'Profile':
              iconName = 'person';
              break;
            default:
              iconName = 'help';
          }
          
          return <Icon name={iconName} size={size} color={color} />;
        },
        tabBarActiveTintColor: '#2196F3',
        tabBarInactiveTintColor: '#999',
        headerShown: false
      })}
    >
      <Tab.Screen name="Home" component={HomeScreen} />
      <Tab.Screen name="Users" component={UsersScreen} />
      <Tab.Screen name="Profile" component={ProfileScreen} />
    </Tab.Navigator>
  );
}

// ä¸»å¯¼èˆª
function AppNavigator() {
  return (
    <NavigationContainer>
      <Stack.Navigator
        initialRouteName="Main"
        screenOptions={{
          headerStyle: {
            backgroundColor: '#2196F3'
          },
          headerTintColor: '#fff',
          headerTitleStyle: {
            fontWeight: 'bold'
          }
        }}
      >
        <Stack.Screen 
          name="Main" 
          component={TabNavigator}
          options={{ headerShown: false }}
        />
        <Stack.Screen 
          name="UserDetail" 
          component={UserDetailScreen}
          options={({ route }) => ({
            title: 'ç”¨æˆ·è¯¦æƒ…',
            headerBackTitle: 'è¿”å›'
          })}
        />
        <Stack.Screen 
          name="Settings" 
          component={SettingsScreen}
          options={{
            title: 'è®¾ç½®',
            presentation: 'modal'
          }}
        />
      </Stack.Navigator>
    </NavigationContainer>
  );
}

// 2. Redux ToolkitçŠ¶æ€ç®¡ç†
import { configureStore, createSlice, createAsyncThunk } from '@reduxjs/toolkit';
import { Provider, useSelector, useDispatch } from 'react-redux';

// å¼‚æ­¥æ“ä½œ
export const fetchUsers = createAsyncThunk(
  'users/fetchUsers',
  async (_, { rejectWithValue }) => {
    try {
      const response = await fetch('https://api.example.com/users');
      if (!response.ok) {
        throw new Error('ç½‘ç»œè¯·æ±‚å¤±è´¥');
      }
      return await response.json();
    } catch (error) {
      return rejectWithValue(error.message);
    }
  }
);

// ç”¨æˆ·çŠ¶æ€åˆ‡ç‰‡
const usersSlice = createSlice({
  name: 'users',
  initialState: {
    items: [] as User[],
    loading: false,
    error: null as string | null
  },
  reducers: {
    clearError: (state) => {
      state.error = null;
    },
    updateUser: (state, action) => {
      const { id, updates } = action.payload;
      const userIndex = state.items.findIndex(user => user.id === id);
      if (userIndex !== -1) {
        state.items[userIndex] = { ...state.items[userIndex], ...updates };
      }
    }
  },
  extraReducers: (builder) => {
    builder
      .addCase(fetchUsers.pending, (state) => {
        state.loading = true;
        state.error = null;
      })
      .addCase(fetchUsers.fulfilled, (state, action) => {
        state.loading = false;
        state.items = action.payload;
      })
      .addCase(fetchUsers.rejected, (state, action) => {
        state.loading = false;
        state.error = action.payload as string;
      });
  }
});

export const { clearError, updateUser } = usersSlice.actions;

// Storeé…ç½®
const store = configureStore({
  reducer: {
    users: usersSlice.reducer
  },
  middleware: (getDefaultMiddleware) =>
    getDefaultMiddleware({
      serializableCheck: {
        ignoredActions: ['persist/PERSIST']
      }
    })
});

export type RootState = ReturnType<typeof store.getState>;
export type AppDispatch = typeof store.dispatch;

// 3. è‡ªå®šä¹‰Hooks
import { useSelector, useDispatch } from 'react-redux';
import { useFocusEffect } from '@react-navigation/native';

export const useAppSelector = useSelector.withTypes<RootState>();
export const useAppDispatch = useDispatch.withTypes<AppDispatch>();

// ç”¨æˆ·æ•°æ®Hook
export function useUsers() {
  const dispatch = useAppDispatch();
  const { items: users, loading, error } = useAppSelector(state => state.users);
  
  const loadUsers = useCallback(() => {
    dispatch(fetchUsers());
  }, [dispatch]);
  
  const updateUserData = useCallback((id: string, updates: Partial<User>) => {
    dispatch(updateUser({ id, updates }));
  }, [dispatch]);
  
  const clearErrorMessage = useCallback(() => {
    dispatch(clearError());
  }, [dispatch]);
  
  // é¡µé¢èšç„¦æ—¶åˆ·æ–°æ•°æ®
  useFocusEffect(
    useCallback(() => {
      loadUsers();
    }, [loadUsers])
  );
  
  return {
    users,
    loading,
    error,
    loadUsers,
    updateUserData,
    clearErrorMessage
  };
}

// è®¾å¤‡ä¿¡æ¯Hook
export function useDeviceInfo() {
  const [deviceInfo, setDeviceInfo] = useState({
    width: screenWidth,
    height: screenHeight,
    isLandscape: false
  });
  
  useEffect(() => {
    const subscription = Dimensions.addEventListener('change', ({ window }) => {
      setDeviceInfo({
        width: window.width,
        height: window.height,
        isLandscape: window.width > window.height
      });
    });
    
    return () => subscription?.remove();
  }, []);
  
  return deviceInfo;
}

// 4. åº”ç”¨å…¥å£
function App() {
  return (
    <Provider store={store}>
      <AppNavigator />
    </Provider>
  );
}

export default App;
```

### åŸç”Ÿæ¨¡å—é›†æˆ

```typescript
// 1. åŸç”Ÿæ¨¡å—æ¡¥æ¥ (iOS)
// ios/MyApp/NativeModule.h
#import <React/RCTBridgeModule.h>
#import <React/RCTEventEmitter.h>

@interface NativeModule : RCTEventEmitter <RCTBridgeModule>
@end

// ios/MyApp/NativeModule.m
#import "NativeModule.h"
#import <React/RCTLog.h>

@implementation NativeModule

RCT_EXPORT_MODULE();

// æ”¯æŒäº‹ä»¶å‘é€
- (NSArray<NSString *> *)supportedEvents {
  return @[@"onLocationUpdate", @"onBatteryChange"];
}

// è·å–è®¾å¤‡ä¿¡æ¯
RCT_EXPORT_METHOD(getDeviceInfo:(RCTPromiseResolveBlock)resolve
                  rejecter:(RCTPromiseRejectBlock)reject) {
  @try {
    UIDevice *device = [UIDevice currentDevice];
    NSDictionary *deviceInfo = @{
      @"name": device.name,
      @"model": device.model,
      @"systemName": device.systemName,
      @"systemVersion": device.systemVersion,
      @"batteryLevel": @(device.batteryLevel)
    };
    resolve(deviceInfo);
  } @catch (NSException *exception) {
    reject(@"device_info_error", @"Failed to get device info", nil);
  }
}

// æ˜¾ç¤ºåŸç”Ÿå¼¹çª—
RCT_EXPORT_METHOD(showNativeAlert:(NSString *)title
                  message:(NSString *)message
                  resolver:(RCTPromiseResolveBlock)resolve
                  rejecter:(RCTPromiseRejectBlock)reject) {
  dispatch_async(dispatch_get_main_queue(), ^{
    UIAlertController *alert = [UIAlertController 
      alertControllerWithTitle:title 
      message:message 
      preferredStyle:UIAlertControllerStyleAlert];
    
    UIAlertAction *okAction = [UIAlertAction 
      actionWithTitle:@"ç¡®å®š" 
      style:UIAlertActionStyleDefault 
      handler:^(UIAlertAction * action) {
        resolve(@"ok");
      }];
    
    [alert addAction:okAction];
    
    UIViewController *rootViewController = [UIApplication sharedApplication].delegate.window.rootViewController;
    [rootViewController presentViewController:alert animated:YES completion:nil];
  });
}

@end

// 2. åŸç”Ÿæ¨¡å—æ¡¥æ¥ (Android)
// android/app/src/main/java/com/myapp/NativeModule.java
package com.myapp;

import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.bridge.ReactContextBaseJavaModule;
import com.facebook.react.bridge.ReactMethod;
import com.facebook.react.bridge.Promise;
import com.facebook.react.bridge.WritableMap;
import com.facebook.react.bridge.Arguments;
import com.facebook.react.modules.core.DeviceEventManagerModule;

import android.os.Build;
import android.content.Context;
import android.app.AlertDialog;

public class NativeModule extends ReactContextBaseJavaModule {
    private ReactApplicationContext reactContext;
    
    public NativeModule(ReactApplicationContext reactContext) {
        super(reactContext);
        this.reactContext = reactContext;
    }
    
    @Override
    public String getName() {
        return "NativeModule";
    }
    
    @ReactMethod
    public void getDeviceInfo(Promise promise) {
        try {
            WritableMap deviceInfo = Arguments.createMap();
            deviceInfo.putString("manufacturer", Build.MANUFACTURER);
            deviceInfo.putString("model", Build.MODEL);
            deviceInfo.putString("version", Build.VERSION.RELEASE);
            deviceInfo.putInt("sdkVersion", Build.VERSION.SDK_INT);
            
            promise.resolve(deviceInfo);
        } catch (Exception e) {
            promise.reject("device_info_error", "Failed to get device info", e);
        }
    }
    
    @ReactMethod
    public void showNativeAlert(String title, String message, Promise promise) {
        getCurrentActivity().runOnUiThread(new Runnable() {
            @Override
            public void run() {
                AlertDialog.Builder builder = new AlertDialog.Builder(getCurrentActivity());
                builder.setTitle(title)
                       .setMessage(message)
                       .setPositiveButton("ç¡®å®š", (dialog, which) -> {
                           promise.resolve("ok");
                       })
                       .show();
            }
        });
    }
    
    // å‘é€äº‹ä»¶åˆ°JavaScript
    private void sendEvent(String eventName, WritableMap params) {
        reactContext
            .getJSModule(DeviceEventManagerModule.RCTDeviceEventEmitter.class)
            .emit(eventName, params);
    }
}

// 3. JavaScriptç«¯ä½¿ç”¨
import { NativeModules, NativeEventEmitter } from 'react-native';

const { NativeModule } = NativeModules;
const nativeEventEmitter = new NativeEventEmitter(NativeModule);

// åŸç”Ÿæ¨¡å—Hook
export function useNativeModule() {
  const [deviceInfo, setDeviceInfo] = useState(null);
  
  useEffect(() => {
    // è·å–è®¾å¤‡ä¿¡æ¯
    NativeModule.getDeviceInfo()
      .then(setDeviceInfo)
      .catch(console.error);
    
    // ç›‘å¬åŸç”Ÿäº‹ä»¶
    const locationSubscription = nativeEventEmitter.addListener(
      'onLocationUpdate',
      (location) => {
        console.log('ä½ç½®æ›´æ–°:', location);
      }
    );
    
    const batterySubscription = nativeEventEmitter.addListener(
      'onBatteryChange',
      (battery) => {
        console.log('ç”µæ± çŠ¶æ€:', battery);
      }
    );
    
    return () => {
      locationSubscription.remove();
      batterySubscription.remove();
    };
  }, []);
  
  const showNativeAlert = useCallback(async (title: string, message: string) => {
    try {
      const result = await NativeModule.showNativeAlert(title, message);
      console.log('å¼¹çª—ç»“æœ:', result);
    } catch (error) {
      console.error('æ˜¾ç¤ºå¼¹çª—å¤±è´¥:', error);
    }
  }, []);
  
  return {
    deviceInfo,
    showNativeAlert
  };
}

// ä½¿ç”¨ç¤ºä¾‹
function DeviceInfoScreen() {
  const { deviceInfo, showNativeAlert } = useNativeModule();
  
  const handleShowAlert = () => {
    showNativeAlert('åŸç”Ÿå¼¹çª—', 'è¿™æ˜¯æ¥è‡ªåŸç”Ÿæ¨¡å—çš„å¼¹çª—');
  };
  
  return (
    <View style={styles.container}>
      <Text style={styles.title}>è®¾å¤‡ä¿¡æ¯</Text>
      
      {deviceInfo && (
        <View style={styles.infoContainer}>
          <Text>è®¾å¤‡å‹å·: {deviceInfo.model}</Text>
          <Text>ç³»ç»Ÿç‰ˆæœ¬: {deviceInfo.systemVersion || deviceInfo.version}</Text>
          <Text>åˆ¶é€ å•†: {deviceInfo.manufacturer}</Text>
        </View>
      )}
      
      <TouchableOpacity style={styles.button} onPress={handleShowAlert}>
        <Text style={styles.buttonText}>æ˜¾ç¤ºåŸç”Ÿå¼¹çª—</Text>
      </TouchableOpacity>
    </View>
  );
}
```

---

<Callout type="success">
ç§»åŠ¨ç«¯å¼€å‘æŠ€æœ¯ä¸ºå‰ç«¯å¼€å‘è€…æä¾›äº†è¿›å…¥ç§»åŠ¨åº”ç”¨é¢†åŸŸçš„æœºä¼šï¼Œé€šè¿‡è·¨å¹³å°æ¡†æ¶å¯ä»¥é«˜æ•ˆåœ°å¼€å‘å‡ºä¼˜è´¨çš„ç§»åŠ¨åº”ç”¨ã€‚
</Callout>
